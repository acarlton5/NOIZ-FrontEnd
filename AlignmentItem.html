<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NOIZ UI — Fresh Scaffold</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- App styles -->
  <style>
/* ===== lock page scroll; app owns scrolling ===== */
html, body {
  height: 100%;
  overflow: hidden;              /* stop body from scrolling */
}

/* root flex row should fill the viewport and not leak scroll */
.noiz-app {
  height: 100vh;                 /* or 100dvh for mobile if you prefer */
  min-height: 0;
  overflow: hidden;
}

/* make MAIN the only scroll container */
main.flex-grow-1 {
  /* it’s already the flex child between sidebars */
  height: 100vh;                 /* fill column height next to 100vh sidebars */
  min-height: 0;                 /* critical: allow internal overflow */
  min-width: 0;
  display: flex;
  flex-direction: column;
  overflow-y: auto;              /* ✅ scroll HERE (not body) */
  overflow-x: hidden;
  overscroll-behavior: contain;  /* nicer touchpad/trackpad behavior */
}

/* sidebars keep their own internal scroll; never cause page scroll */
.channel-rail,
.channel-sidebar,
.chat-sidebar,
.member-sidebar {
  overflow-x: hidden;
}

/* collapsed sidebars must not reintroduce page scroll */
.app-sidebar.is-collapsed {
  overflow: hidden !important;
}

/* (optional) avoid accidental horizontal scroll anywhere */
body { overflow-x: hidden; }




/* ===============================================
==========RAIL SYSTEM==========================
=================================================*/

:root{
  --rail-width: 72px;
  --rail-item-size: 50px;

  /* indicator spacing + sizes */
  --indicator-gap: 8px;            /* space between avatar and bar/dot */
  --indicator-width: 4px;
  --indicator-hover-h: 24px;
  --indicator-active-h: 32px;
  --dot-size: 8px;

  /* frame behavior */
  --frame-opacity: 1;               /* opacity on hover */
  --sidebar-row-h: 52px;   /* row height (User Bar + Owner Card) */
  --sidebar-avatar: 36px;  /* avatar size used in both rows */
}

.channel-rail{
  width: var(--rail-width);
  height: 100vh;
  background:#202225;
  border-right:1px solid #111215;
  display:flex;
  flex-direction:column;
  align-items:center;
  /* IMPORTANT: allow left overhang for indicators even when list scrolls */
  overflow: visible;
}

/* pinned top cluster */
.channel-rail-top{
  flex: 0 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  margin-left: 4px;
  margin-top: 10px;
}

/* scrollable list
   reserve a left gutter INSIDE the scroller so indicators never clip */
.channel-rail-list{
  --left-gutter: calc(var(--indicator-gap) + var(--indicator-width) + 6px);

  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  align-items:flex-start;                 /* we pad left, so align to start */
  gap:10px;
  margin-top:12px;
  width: 100%;
  padding: 0 4px 0 var(--left-gutter);   /* gutter for indicators */
  overflow-y: auto;
  overflow-x: hidden;                    /* allow left overhang */

  scrollbar-width: thin;
  scrollbar-color:#3f4146 transparent;
  margin-right:10px;
  padding-top:10px;
}
.channel-rail-list::-webkit-scrollbar{ width:6px; }
.channel-rail-list::-webkit-scrollbar-thumb{ background:#3f4146; border-radius:4px; }

/* one circular item */
.rail-item{
  position:relative;
  width: var(--rail-item-size);
  height: var(--rail-item-size);
  border-radius:50%;
  display:grid; place-items:center;
  text-decoration:none;
  overflow:visible;                       /* let frames breathe */
  outline: none;
}

/* avatar image */
.rail-item > img{
  width:100%; height:100%;
  border-radius:50%;
  object-fit:cover;
  position:relative; z-index:1;
}

/* ===== Avatar Frame (hover only) =============================== */
.rail-item::after{
  content:"";
  position:absolute;
  inset: -10%;                            /* proportional bleed for 288px art */
  border-radius: 0;                       /* don’t clip PNG edges */
  background: var(--frame, none) center/contain no-repeat;
  opacity: 0;
  pointer-events:none;
  z-index:2;
  transition: opacity .16s ease;
}
.rail-item:hover::after{ opacity: var(--frame-opacity); }

/* ===== Left Indicator (bar or dot) ============================= */
/* Base bar (hidden until hover/active).
   Because we reserved a left gutter, we offset into it with a negative left. */
.rail-item::before{
  content:"";
  position:absolute;
  left: calc(-1 * (var(--indicator-gap) + var(--indicator-width)));
  top: 50%;
  width: var(--indicator-width);
  height: 0;
  background: var(--accent, #fff);
  border-radius: 0 10px 10px 0;
  transform: translateY(-50%);
  opacity: 0;
  transition: height .16s ease, opacity .16s ease, left .16s ease;
}

/* hover = bar appears; active = taller bar */
.rail-item:hover::before{
  height: var(--indicator-hover-h);
  opacity: 1;
  background: var(--accent, #fff);
}
.rail-item.is-active::before{
  height: var(--indicator-active-h);
  opacity: 1;
  background: var(--accent, #fff);
}

/* notification: dot at rest, same gap; morphs to bar on hover/active */
.rail-item.notification::before{
  width: var(--dot-size);
  height: var(--dot-size);
  left: calc(-1 * (var(--indicator-gap) + var(--dot-size)));
  top: 50%;
  transform: translateY(-50%);
  border-radius: 50%;
  opacity: 1;                               /* dot always visible */
  background: var(--accent, #fff);
  transition:
    width .16s ease, height .16s ease, left .16s ease,
    border-radius .16s ease, opacity .16s ease;
}
.rail-item.notification:hover::before,
.rail-item.notification.is-active::before{
  width: var(--indicator-width);
  height: var(--indicator-hover-h);
  left: calc(-1 * (var(--indicator-gap) + var(--indicator-width)));
  border-radius: 0 10px 10px 0;
  opacity: 1;
  background: var(--accent, #fff);
}
.rail-item.notification.is-active::before{
  height: var(--indicator-active-h);
}

/* ===== Home item & separator ================================== */
.rail-item.home{
  background:#484a64;
  border-radius:50%;
}
.rail-item.home > img{
  object-fit: contain;               /* svg icon */
  padding: 10%;
}
/* no frame/indicator on home */
/*.rail-item.home::after,
.rail-item.home::before{ display:none; }*/

.channel-separator{
  width: 32px;
  height: 2px;
  background:#3a3c42;
  border-radius:1px;
  margin: 8px 0;
}

/* ===============================================
========== CHANNEL SIDEBAR (one scroller) =========
=================================================*/

.channel-sidebar{
  width: 250px;
  flex: 0 0 250px;
  height: 100vh;

  background:#2b2d31;
  border-right:1px solid #111215;

  display:flex;
  flex-direction:column;

  /* 👇 Make THIS the only scrolling container */
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color:#3f4146 transparent;
}
.channel-sidebar::-webkit-scrollbar{ width:6px; }
.channel-sidebar::-webkit-scrollbar-thumb{ background:#3f4146; border-radius:4px; }

/* ===== OWNER CARD (fixed at top via sticky) ================== */
.sidebar-header.owner-card{
  position: sticky;
  top: 0;
  z-index: 20;

  height: var(--sidebar-row-h);
  min-height: var(--sidebar-row-h);
  flex: 0 0 var(--sidebar-row-h);

  background:#1e1f22;
  border-bottom:1px solid #111215;
  overflow:hidden;
  padding:0;

  display:flex;
  align-items:center;
}

/* banner + tint for readability */
.owner-banner{
  position:absolute; inset:0; z-index:0;
  background: var(--banner, none) center/cover no-repeat;
}
.owner-banner::before{
  content:""; position:absolute; inset:0; z-index:1; background: rgba(0,0,0,.35);
}

/* full‑width row (same layout as user bar) */
.owner-card__wrap{
  --avatar-size: var(--sidebar-avatar);
  position: relative; z-index:3;
  width:100%;
  display:grid;
  grid-template-columns: var(--avatar-size) 1fr auto;
  align-items:center; gap:10px;
  padding:8px 12px;
  color:#e6e6e6; cursor:pointer; isolation:isolate;
}
.owner-card__wrap::before{
  content:""; position:absolute; left:0; top:50%;
  width:4px; height:0; opacity:0;
  background: var(--accent, #5865f2);
  border-radius:0 4px 4px 0;
  transform:translateY(-50%);
  transition:height .16s ease, opacity .16s ease;
}
.owner-card__wrap:hover::before,
.owner-card__wrap:focus-visible::before{ height:20px; opacity:1; }

/* avatar + frame (ALWAYS visible) */
.owner-avatar{ position:relative; width:var(--avatar-size); height:var(--avatar-size);
  border-radius:50%; overflow:visible; isolation:isolate; }
.owner-avatar img{ width:100%; height:100%; border-radius:50%; object-fit:cover; position:relative; z-index:1; display:block; }
.owner-avatar::after{
  content:""; position:absolute; inset:-12%; border-radius:0;
  background: var(--frame, none) center/contain no-repeat;
  opacity:1; pointer-events:none; z-index:2; transition:opacity .16s ease;
}
.owner-meta{ display:flex; flex-direction:column; min-width:0; }
.owner-name{ font-weight:700; font-size:14px; color:#fff; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; }
.owner-status{ display:flex; align-items:center; gap:6px; font-size:12px; color:#eaeaea; }
.owner-actions{ display:flex; align-items:center; gap:6px; }
.owner-icon{ background:none; border:0; color:#bbb; cursor:pointer; font-size:16px; line-height:1; padding:4px; border-radius:6px;
  transition:color .15s ease, background .15s ease; }
.owner-icon:hover{ color:#fff; background:#3a3c42; }

/* status colors */
.status-dot{ width:10px; height:10px; border-radius:50%; background:#888; position:relative; top:-1px; }
.status-dot[data-status="online"]  { background:#3ba55d; }
.status-dot[data-status="away"]    { background:#faa81a; }
.status-dot[data-status="dnd"]     { background:#ed4245; }
.status-dot[data-status="offline"] { background:#5b5e66; }
.status-dot[data-status="live"]    { background:#f50; }

/* ===== CHANNEL LIST (not a scroller anymore) ================= */
.sidebar-channels{
  flex: 1 0 auto;            /* fills the space between sticky top/bottom */
  overflow: visible;          /* let the parent handle scrolling */
  padding:8px 0;
  display:flex; flex-direction:column; gap:4px;
}
.channel-category{
  padding: 6px 12px; font-size:12px; font-weight:700; text-transform:uppercase; color:#aaa;
}
.channel-link{
  --accent:#5865f2;
  position:relative;
  display:flex; align-items:center; gap:6px;
  padding:6px 12px;
  font-size:14px;
  color:#ccc;
  border-radius:4px;
  text-decoration:none;
  isolation:isolate;
  transition:color .15s ease;
}
.channel-link::before{
  content:"";
  position:absolute; left:0; top:50%;
  width:4px; height:0;
  background:var(--accent);
  border-radius:0 4px 4px 0;
  transform:translateY(-50%);
  opacity:0;
  transition:height .16s ease, opacity .16s ease;
  z-index:2;
}
.channel-link:hover::before{ height:16px; opacity:1; }
.channel-link:hover{ color:#fff; }
.channel-link.active::before{ height:24px; opacity:1; }
.channel-link.active{ color:#fff; }

/* ===== Notification mode ===== */
.channel-link.notification::before{
  width:8px; height:8px;
  left:-4px;                 /* shift left so only half shows */
  top:50%;
  border-radius:50%;
  opacity:1;
  transform:translateY(-50%);
  background:var(--accent, #fff);
  transition: all .16s ease;
}
.channel-link.notification:hover::before,
.channel-link.notification.active::before{
  width:4px;
  height:20px;
  left:0;                    /* flush against edge when bar */
  border-radius:0 4px 4px 0;
}
.channel-hash{ font-weight:600; color:#888; }

/* ===== USER BAR (fixed at bottom via sticky) ================= */
.channel-sidebar .user-bar{
  position: sticky;
  bottom: 0;
  z-index: 20;

  height: var(--sidebar-row-h);
  min-height: var(--sidebar-row-h);
  flex: 0 0 var(--sidebar-row-h);

  background:#1e1f22;
  border-top:1px solid #111215;
  overflow:hidden;
}

/* banner */
.channel-sidebar .userbar-banner{
  position:absolute; inset:0; z-index:0;
  background: var(--banner, none) center/cover no-repeat;
}
.channel-sidebar .userbar-banner::before{
  content:""; position:absolute; inset:0; z-index:1; background: rgba(0,0,0,.35);
}
.channel-sidebar .userbar-banner::after{
  content:""; position:absolute; left:0; right:0; bottom:0; height:28px; z-index:2;
  background: linear-gradient(to top, rgba(0,0,0,.45), rgba(0,0,0,0));
}

/* row content */
.channel-sidebar .user-bar__wrap{
  --avatar-size: var(--sidebar-avatar);
  position: relative; z-index:3;
  width:100%;
  display:grid; grid-template-columns: var(--avatar-size) 1fr auto;
  align-items:center; gap:10px;
  padding:8px 10px;
  color:#e6e6e6; text-align:left; isolation:isolate; cursor:pointer;
}
.channel-sidebar .user-bar__wrap::before{
  content:""; position:absolute; left:0; top:50%;
  width:4px; height:0; opacity:0;
  background: var(--accent, #5865f2);
  border-radius:0 4px 4px 0;
  transform:translateY(-50%);
  transition:height .16s ease, opacity .16s ease;
}
.channel-sidebar .user-bar__wrap:hover::before,
.channel-sidebar .user-bar__wrap:focus-visible::before{ height:20px; opacity:1; }

.channel-sidebar .user-avatar{
  position:relative; width:var(--avatar-size); height:var(--avatar-size);
  border-radius:50%; overflow:visible; isolation:isolate;
}
.channel-sidebar .user-avatar img{
  width:100%; height:100%; border-radius:50%; object-fit:cover; display:block; position:relative; z-index:1;
}
.channel-sidebar .user-avatar::after{
  content:""; position:absolute; inset:-12%; border-radius:0;
  background: var(--frame, none) center/contain no-repeat;
  opacity:0; pointer-events:none; z-index:2; transition:opacity .16s ease;
}
.channel-sidebar .user-bar__wrap:hover .user-avatar::after{ opacity:1; }

.channel-sidebar .user-meta{ display:flex; flex-direction:column; min-width:0; }
.channel-sidebar .user-name{ font-weight:700; font-size:14px; color:#fff; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; }
.channel-sidebar .user-status{ display:flex; align-items:center; gap:6px; font-size:12px; color:#bdbdbd; }
.channel-sidebar .status-dot{ width:10px; height:10px; border-radius:50%; background:#888; position:relative; top:-1px; }
.channel-sidebar .status-dot[data-status="online"]  { background:#3ba55d; }
.channel-sidebar .status-dot[data-status="away"]    { background:#faa81a; }
.channel-sidebar .status-dot[data-status="dnd"]     { background:#ed4245; }
.channel-sidebar .status-dot[data-status="offline"] { background:#5b5e66; }
.channel-sidebar .status-dot[data-status="live"]    { background:#f50; }

.channel-sidebar .user-actions{ display:flex; align-items:center; gap:6px; }
.channel-sidebar .userbar-icon{
  background:none; border:0; color:#bbb; cursor:pointer;
  font-size:16px; line-height:1; padding:4px; border-radius:6px;
  transition:color .15s ease, background .15s ease;
}
.channel-sidebar .userbar-icon:hover{ color:#fff; background:#3a3c42; }

.channel-sidebar .user-bar__wrap:focus-visible{
  outline:2px solid #5865f2; outline-offset:2px; border-radius:8px;
}





























































/* ===============================================
================ MEMBER SIDEBAR ===================
==================================================*/

.member-sidebar{
  width: 260px;
  flex: 0 0 260px;
  height: 100vh;
  background:#2b2d31;
  border-left:1px solid #111215;

  display:flex;
  flex-direction:column;

  overflow-y:auto; overflow-x:hidden;
  scrollbar-width:thin;
  scrollbar-color:#3f4146 transparent;
}
.member-sidebar::-webkit-scrollbar{ width:6px; }
.member-sidebar::-webkit-scrollbar-thumb{ background:#3f4146; border-radius:4px; }

/* ----- Sticky header with banner ----- */
.member-header{
  position: sticky; top: 0; z-index: 20;
  height: var(--sidebar-row-h);
  min-height: var(--sidebar-row-h);
  flex: 0 0 var(--sidebar-row-h);
  background:#1e1f22;
  border-bottom:1px solid #111215;
  overflow:hidden; padding:0;
  display:flex; align-items:center;
}
.member-banner{
  position:absolute; inset:0; z-index:0;
  background: var(--banner, none) center/cover no-repeat;
  /* no border-radius here so header stays square */
}
.member-banner::before{
  content:""; position:absolute; inset:0; z-index:1;
  background: rgba(0,0,0,.35);
}
.member-header__wrap{
  position:relative; z-index:2; width:100%;
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 12px; color:#e6e6e6;
}
.member-header__title{ font-weight:700; }
.member-header__count{ font-size:12px; opacity:.85; }

/* ----- List ----- */
.member-list{ flex: 1 0 auto; overflow: visible; padding:8px 0;
  display:flex; flex-direction:column; gap:6px; padding-left: 10px;padding-right: 10px;}

.member-section{
  padding: 6px 12px;
  font-size:12px;
  font-weight:700;
  text-transform:uppercase;
  color:#aaa;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}
.member-section-count{
  font-size:11px;
  font-weight:600;
  padding:2px 6px;
  border-radius:999px;
  background: var(--accent, #5865f2);
  color:#fff;
  line-height:1;
}


/* ----- Member row with banner ----- */
.member-row{
  --accent:#5865f2;
  position:relative;
  display:grid;
  grid-template-columns: 32px 1fr auto; /* avatar | meta | status-dot */
  align-items:center; gap:10px;
  padding:6px 12px;
  color:#ccc; text-decoration:none;
  border-radius:8px;
  isolation:isolate;
  transition: color .15s ease;
  overflow:hidden;
}
.member-row-banner{
  position:absolute; inset:0; z-index:0;
  background: var(--banner, none) center/cover no-repeat;
  border-radius:inherit;
}
.member-row-banner::before{
  content:""; position:absolute; inset:0; z-index:1;
  background: rgba(0,0,0,.35); border-radius:inherit;
}

/* left accent indicator */
.member-row::before{
  content:""; position:absolute; left:0; top:50%;
  width:4px; height:0; background:var(--accent);
  border-radius:0 4px 4px 0; transform:translateY(-50%);
  opacity:0; transition:height .16s ease, opacity .16s ease; z-index:2;
}
.member-row:hover::before{ height:16px; opacity:1; }
.member-row:hover{ color:#fff; }
.member-row.active::before{ height:24px; opacity:1; }
.member-row.active{ color:#fff; }

/* half-dot idle → bar on hover/active */
.member-row.notification::before{
  width:8px; height:8px; left:-4px; top:50%;
  border-radius:50%; opacity:1; transform:translateY(-50%);
  background:var(--accent); transition: all .16s ease;
}
.member-row.notification:hover::before,
.member-row.notification.active::before{
  width:4px; height:20px; left:0; border-radius:0 4px 4px 0;
}

/* avatar + hover frame */
.member-avatar{ position:relative; width:32px; height:32px;
  border-radius:50%; overflow:visible; isolation:isolate; z-index:2; }
.member-avatar img{ width:100%; height:100%; border-radius:50%; object-fit:cover;
  display:block; position:relative; z-index:1; }
.member-avatar::after{
  content:""; position:absolute; inset:-12%;
  border-radius:0; background: var(--frame, none) center/contain no-repeat;
  opacity:0; pointer-events:none; z-index:2; transition:opacity .16s ease;
}
.member-row:hover .member-avatar::after{ opacity:1; }

/* meta + badges */
.member-meta{ display:flex; flex-direction:column; min-width:0; z-index:2; }
.member-name-badges{ display:flex; align-items:center; gap:1px; min-width:0; }
.member-name{
  font-weight:700; font-size:14px; color:#fff;
  overflow:hidden; white-space:nowrap; text-overflow:ellipsis; min-width:0;
}
.member-badges{ display:inline-flex; align-items:center; gap:1px; flex-shrink:0; }
.mbadge{ width:16px; height:16px; display:inline-block;
  opacity:.95; transition: transform .12s ease, opacity .12s ease; }
.mbadge *:not([fill]){ fill: currentColor; }
.member-row:hover .mbadge{ opacity:1; }
.mbadge:hover{ transform: scale(1.08); }
.member-sub{ font-size:12px; color:#bdbdbd;
  overflow:hidden; white-space:nowrap; text-overflow:ellipsis; }

/* status dot */
.status-dot{ width:10px; height:10px; border-radius:50%; background:#888; z-index:2; }
.status-dot[data-status="online"]  { background:#3ba55d; }
.status-dot[data-status="away"]    { background:#faa81a; }
.status-dot[data-status="dnd"]     { background:#ed4245; }
.status-dot[data-status="offline"] { background:#5b5e66; }
.status-dot[data-status="live"]    { background:#f50; }


/* ===============================================
========== MEMBER SIDEBAR COLLAPSE TOGGLE =========
==================================================*/

/* use a token so width stays consistent */
:root{ --member-sidebar-w: 260px; }

/* make sure the member sidebar width is driven by flex-basis/width */
.member-sidebar{
  flex: 0 0 var(--member-sidebar-w);
  width: var(--member-sidebar-w);
  transition: flex-basis .2s ease, width .2s ease, min-width .2s ease, border-left-color .2s ease;
}

/* collapsed state on <body> (or your main app root) */
.members-collapsed .member-sidebar{
  flex-basis: 0;
  width: 0;
  min-width: 0;
  overflow: hidden;
  border-left-color: transparent; /* hides the divider when closed */
}

/* optional: style the button when collapsed */
.members-collapsed #toggleMembersBtn{
  background:#3a3c42;
  color:#fff;
}

/* ===============================================
================ MINI PROFILE (CARD STYLE) =========
==================================================*/
.mini-profile{
  --mp-w: 320px;
  --mp-radius: 12px;

  position: fixed;
  z-index: 1000;
  width: var(--mp-w);
  color:#e6e6e6;
  background:#1e1f22;
  border:1px solid #0e0f12;
  border-radius: var(--mp-radius);
  box-shadow: 0 20px 40px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.05) inset;
  overflow:hidden;
  opacity:0;
  transform: translateY(6px) scale(.98);
  transition: opacity .14s ease, transform .14s ease;
  pointer-events: none; /* enabled when visible */
}
.mini-profile.visible{
  opacity:1; transform: translateY(0) scale(1);
  pointer-events: auto;
}
.mini-profile.hidden{ display:block; } /* keep in DOM for measurements */

/* banner now reads --banner just like other cards */
.mini-profile .mp-banner{
  height: 92px;
  background: var(--banner, linear-gradient(90deg, #2f3340, #242733));
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  position: relative;
}
.mini-profile .mp-banner::after{
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(to bottom, rgba(0,0,0,.0) 20%, rgba(0,0,0,.35) 100%);
}

/* accent divider under banner */
.mini-profile .mp-accent{
  position: relative;
  height:2px;
  background: linear-gradient(90deg, var(--accent,#7c3aed), transparent 60%);
  z-index: 2; /* above banner, below avatar ring */
}

/* body (avatar will overlap from above) */
.mini-profile .mp-body{
  display:grid; grid-template-columns: 72px 1fr; gap: 12px;
  padding: 12px;
  position: relative; z-index: 3;
}

/* avatar — pulled upward to split banner/body */
.mini-profile .mp-avatar{
  position:relative;
  width:72px; height:72px;
  border-radius:50%;
  overflow:visible; isolation:isolate;
  margin-top: -36px;               /* overlap banner + accent */
  z-index: 4;                       /* above the accent line */
}
/* mask ring (hide the accent line behind avatar) */
.mini-profile .mp-avatar::before{
  content:"";
  position:absolute;
  inset:-4px;                       /* ring thickness */
  border-radius:50%;
  background:#1e1f22;               /* same as card body */
  z-index:0;
}
.mini-profile .mp-avatar img{
  position:relative; z-index:1;
  width:100%; height:100%; border-radius:50%; object-fit:cover; display:block;
}
/* avatar frame (always visible) */
.mini-profile .mp-avatar::after{
  content:""; position:absolute; inset:-14%;
  border-radius:0; background: var(--frame, none) center/contain no-repeat;
  opacity:1; pointer-events:none; z-index:2;
}

/* meta */
.mini-profile .mp-display{ font-weight:800; font-size:16px; color:#fff; }
.mini-profile .mp-name-line{ display:flex; align-items:baseline; gap:6px; flex-wrap:wrap; }

.mini-profile .mp-status-line{ display:flex; align-items:center; gap:6px; margin-top:4px; }
.mini-profile .mp-status-text{ font-size:12px; color:#ddd; }
.mini-profile .status-dot{
  width:10px; height:10px; border-radius:50%; background:#888;
}
.mini-profile .status-dot[data-status="online"]  { background:#3ba55d; }
.mini-profile .status-dot[data-status="away"]    { background:#faa81a; }
.mini-profile .status-dot[data-status="dnd"]     { background:#ed4245; }
.mini-profile .status-dot[data-status="offline"] { background:#5b5e66; }
.mini-profile .status-dot[data-status="live"]    { background:#f50; }

/* badges section (shared background strip) */
.mini-profile .mp-badges{
  display:flex;
  align-items:center;
  gap:6px;
  margin-top:8px;
  flex-wrap:wrap;

  background:#2a2c31;
  border:1px solid #1b1d22;
  border-radius:8px;
  padding:6px 8px;
}
/* each badge: transparent mini-tile */
.mini-profile .mp-badges .mbadge{
  position:relative;
  width:20px; height:20px;
  display:grid; place-items:center;
  border-radius:6px;
  color:#e6e6e6;
  font-size:13px; /* for emoji */
  line-height:1;
  cursor:default;
  transition: transform .12s ease, opacity .12s ease;
  overflow:hidden;
}
.mini-profile .mp-badges .mbadge:hover{ transform: scale(1.08); opacity:1; }

/* badge tooltips */
.mini-profile .mp-badges .mbadge[data-tip]::after,
.mini-profile .mp-badges .mbadge[data-tip]::before{
  content:"";
  position:absolute;
  opacity:0;
  pointer-events:none;
  transition:opacity .14s ease, transform .14s ease;
}
.mini-profile .mp-badges .mbadge[data-tip]::after{
  content: attr(data-tip);
  background: var(--tip-bg, rgba(17,19,25,.96));
  color: var(--tip-text, #e8eaf0);
  border:1px solid var(--tip-bd, #0f1116);
  border-radius: var(--tip-radius, 8px);
  padding: var(--tip-pad-y,4px) var(--tip-pad-x,8px);
  font-size:11px; font-weight:700;
  box-shadow: var(--tip-shadow, 0 10px 26px rgba(0,0,0,.45));
  white-space:nowrap;
  bottom: calc(100% + 6px);
  left:50%;
  transform:translateX(-50%) translateY(4px);
  z-index:10;
}
.mini-profile .mp-badges .mbadge[data-tip]::before{
  width:8px; height:8px;
  background: var(--tip-bg, rgba(17,19,25,.96));
  border-left:1px solid var(--tip-bd,#0f1116);
  border-top:1px solid var(--tip-bd,#0f1116);
  bottom: calc(100% + 1px);
  left:50%;
  transform:translateX(-50%) rotate(45deg);
  z-index:9;
}
.mini-profile .mp-badges .mbadge:hover::after,
.mini-profile .mp-badges .mbadge:hover::before{
  opacity:1; transform:translateX(-50%) translateY(0);
}

/* about */
.mini-profile .mp-about{
  font-size:13px; color:#cfcfcf; line-height:1.35; margin:10px 0 0;
  white-space:pre-wrap;
}

/* stats */
.mini-profile .mp-stats{
  display:grid; grid-template-columns: repeat(3, 1fr); gap:6px;
  margin-top:10px;
}
.mini-profile .mp-stats > div{
  background:#2a2c31; border:1px solid #1b1d22; border-radius:8px;
  padding:8px; text-align:center;
}
.mini-profile .mp-stats strong{ display:block; font-size:14px; color:#fff; }
.mini-profile .mp-stats span{ font-size:11px; color:#aaa; }

/* actions — horizontally aligned */
.mini-profile .mp-actions{
  display:flex; align-items:center; gap:8px;
  padding:0 12px 12px;
  margin-top:-4px;
}
.mini-profile .mp-btn,
.mini-profile .mp-icon{
  background:#2a2c31; color:#e6e6e6; border:1px solid #1b1d22;
  padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:700; font-size:13px;
  transition: background .15s ease, color .15s ease, border-color .15s ease;
}
.mini-profile .mp-btn.primary{
  background: var(--accent, #5865f2); border-color: transparent; color:#fff;
}
.mini-profile .mp-btn.primary:hover{ filter: brightness(1.05); }
.mini-profile .mp-icon{
  padding:6px 8px; border-radius:8px; font-size:18px; color:#bbb;
}
.mini-profile .mp-icon:hover{ background:#34363c; color:#fff; }

/* custom thin scrollbar for any horizontal elements inside (future-proof) */
.mini-profile .mp-actions::-webkit-scrollbar{ height:6px; }
.mini-profile .mp-actions::-webkit-scrollbar-thumb{ background:#2f3239; border-radius:4px; }
.mini-profile .mp-actions{ scrollbar-width:thin; scrollbar-color:#2f3239 transparent; }


/* ===============================================
================ CHAT TOP BAR =====================
==================================================*/

.chat-topbar{
  position: sticky; top: 0; z-index: 15;
  flex: 0 0 var(--sidebar-row-h);
  height: var(--sidebar-row-h);
  min-height: var(--sidebar-row-h);
  background:#2b2d31;
  border-bottom:1px solid #111215;
  display:flex; align-items:center; justify-content:space-between;
  padding:0 12px;
}

/* left side: channel info */
.chat-topbar-left{
  display:flex; align-items:center; gap:8px;
  font-size:14px; font-weight:600; color:#e6e6e6;
}
.chat-topbar-left .channel-hash{ color:#aaa; font-weight:700; }
.chat-topbar-left .channel-title{ color:#fff; }
.chat-topbar-left .channel-topic{ font-size:13px; color:#bbb; }

/* right side: action buttons + search */
.chat-topbar-right{
  display:flex; align-items:center; gap:8px;
}
.tb-icon{
  background:none; border:0; color:#bbb; cursor:pointer;
  font-size:15px; line-height:1; padding:6px; border-radius:6px;
  transition: color .15s ease, background .15s ease;
}
.tb-icon:hover{ color:#fff; background:#3a3c42; }

/* ===============================================
================ TOP BAR SEARCH ===================
==================================================*/

/* wrapper so the button can sit inside the pill */
.tb-search-group{
  position: relative;
  width: 180px;                 /* tweak as needed */
  margin-inline-start: 12px;
  height: 35px;
}

/* the pill itself (squarer corners than chat) */
.tb-search{
  width: 100%;
  height: 100%;
  background: #0f1116;
  border: 1px solid #101217;
  border-radius: 8px;           /* a little more square */
  box-shadow: inset 0 1px 0 rgba(255,255,255,.03);
  color: #e6e6e6;
  font-size: 13px;
  padding: 0 40px 0 10px;       /* room for the right circle */
  outline: none;
  transition: border-color .2s ease, background .2s ease;
}
.tb-search::placeholder{ color:#6e7683; }

/* focus keeps the same border style (no blue glow) */
.tb-search:focus{
  border-color: #181b20;
  background: #11141a;
}

/* right circular button INSIDE the pill */
.tb-search-btn{
  position: absolute;
  right: 5px;
  top: 50%;
  transform: translateY(-50%);
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  background: #171a21;
  border: 1px solid #0f1217;
  color: #c9ced6;
  font-size: 15px;              /* adjust if you drop in an SVG */
  line-height: 1;
  cursor: pointer;
  transition: background .15s ease, color .15s ease, border-color .15s ease, transform .05s ease;
}
.tb-search-btn:hover{
  background: #20242b;
  color: #fff;
  border-color: #181b20;
}

/* ===============================================
========== GENERIC SIDEBAR COLLAPSE SHELL =========
==================================================*/

/* All collapsible sidebars share this shell */
.app-sidebar{
  flex: 0 0 var(--w, 260px);
  width: var(--w, 260px);
  min-width: 0;
  transition:
    flex-basis .2s ease,
    width .2s ease,
    min-width .2s ease,
    border-color .2s ease;
}

/* Collapsed state lives on the sidebar element */
.app-sidebar.is-collapsed{
  flex-basis: 0;
  width: 0;
  min-width: 0;
  overflow: hidden;
  border-left-color: transparent;   /* optional: hide divider if any */
  border-right-color: transparent;
}

/* Optional: pressed style for any toggle button */
.tb-icon[aria-pressed="true"]{
  background:#3a3c42;
  color:#fff;
}

/* ===============================================
================ CHAT SIDEBAR (FULL) =============
==================================================*/

.chat-sidebar{
  background:#1f2127;
  border-left:1px solid #121317;
  display:flex; flex-direction:column;
  min-width:0;
  height:100vh;        /* fill column height */
  min-height:0;        /* allow flex children to shrink (container) */
  color:#d9dde3;
  --radius:10px;
}

/* Header (matches top bar + optional banner) */
.chat-header{
  flex:0 0 var(--sidebar-row-h, 52px);
  display:flex; align-items:center;
  padding:0 12px;
  position:relative;
  background:#2b2d31;
  border-bottom:1px solid #111215;
  font-weight:900; text-transform:uppercase; letter-spacing:.06em; font-size:12px;
  color:#fff; z-index:1; overflow:hidden;
}
.chat-header::before{ content:""; position:absolute; inset:0; background: var(--banner, none) center/cover no-repeat; z-index:-2; }
.chat-header::after{ content:""; position:absolute; inset:0; background: linear-gradient(to bottom, rgba(0,0,0,.0) 20%, rgba(0,0,0,.35) 100%); z-index:-1; }
.chat-title{ position:relative; z-index:2; }

/* Top-3 leaderboard (horizontal scroll) */
.chat-top3{ flex:0 0 auto; background:#1b1d23; border-bottom:1px solid #14161b; padding:8px 6px; }
.top3-scroller{
  display:flex; gap:8px; align-items:center;
  overflow-x:auto; overscroll-behavior-x:contain;
  padding:0 4px 2px;
  scrollbar-width:thin; scrollbar-color:#343844 transparent;
}
.top3-scroller::-webkit-scrollbar{ height:6px; }
.top3-scroller::-webkit-scrollbar-thumb{ background:#343844; border-radius:4px; }
.top-chip{
  --accent:#8ab4ff;
  display:inline-grid; grid-auto-flow:column; align-items:center; gap:8px;
  padding:6px 8px; border-radius:8px;
  background:#262a33; border:1px solid #151820; color:#e6e6e6; text-decoration:none;
  transition: background .15s ease, border-color .15s ease, transform .05s ease;
  flex:0 0 auto;
}
.top-chip:hover{ background:#2b303a; border-color:#1c2029; }
.top-rank{
  background:#0f1116; border:1px solid #0b0d12; color:#fff; font-weight:900;
  height:20px; min-width:20px; padding:0 6px; border-radius:6px; display:grid; place-items:center; font-size:12px;
}
.top-name{ font-weight:800; font-size:12px; }
.top-score{ font-size:12px; font-weight:900; color:#fff; display:inline-grid; grid-auto-flow:column; gap:4px; align-items:center; }
.top-score .coin{ width:14px; height:14px; }

/* Promo card */
.chat-promo{
  flex:0 0 auto;
  position:relative; margin:10px; padding:12px; border-radius: var(--radius);
  background: linear-gradient(135deg,#3a2a85,#7c3aed);
  overflow:hidden; box-shadow: 0 4px 18px rgba(0,0,0,.25);
}
.chat-promo::after{ content:""; position:absolute; inset:0; background: radial-gradient(120px 80px at 100% 0%, rgba(255,255,255,.15), transparent 60%); pointer-events:none; }
.promo-title{ font-weight:900; text-transform:uppercase; font-size:12px; letter-spacing:.05em; }
.promo-sub{ font-size:12px; opacity:.9; }
.promo-play{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  padding:8px 14px; border-radius:20px; border:0; cursor:pointer;
  background:#fff; color:#1f2127; font-weight:900; text-transform:uppercase;
}

/* Messages (scrollable list) */
.chat-body{
  flex:1 1 auto;
  min-height:0;               /* allow the scroll pane to shrink */
  overflow-y:auto;
  overflow-x:hidden;
  padding:10px 10px 8px;
  display:flex; flex-direction:column; gap:8px;
}
/* 🛡️ anti-squish: each child keeps its intrinsic height */
.chat-body > *{ flex:0 0 auto; }

.chat-body::-webkit-scrollbar{ width:6px; }
.chat-body::-webkit-scrollbar-thumb{ background:#343844; border-radius:4px; }

.msg-row{
  display:grid; grid-template-columns: 28px 1fr; gap:8px;
  align-items:start;
  min-width:0;
}
.msg-avatar{
  position:relative; width:28px; height:28px; border-radius:50%;
  overflow:visible; isolation:isolate; flex:none;
}
.msg-avatar img{ width:100%; height:100%; border-radius:50%; object-fit:cover; position:relative; z-index:1; display:block; }
.msg-avatar::after{
  content:""; position:absolute; inset:-18%;
  background: var(--frame, none) center/contain no-repeat; border-radius:0;
  opacity:0; pointer-events:none; z-index:2; transition:opacity .16s ease;
}
.msg-row:hover .msg-avatar::after{ opacity:1; }

.msg-content{ min-width:0; display:flex; flex-direction:column; gap:2px; }
.msg-head{ display:flex; align-items:center; gap:8px; min-width:0; }
.msg-name{
  color: var(--name-color, #8ab4ff);
  font-weight:900; text-decoration:none; max-width:60%;
  overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
}
.msg-badges{ display:inline-flex; gap:1px; }
.mbadge{ width:16px; height:16px; opacity:.95; }
.mbadge *:not([fill]){ fill: currentColor; }
.msg-time{ font-size:11px; color:#8a909a; margin-left:auto; }
.msg-text{
  color:#e6e6e6; font-size:13px; line-height:1.35;
  word-break:break-word; overflow-wrap:anywhere;  /* 🛡 long tokens */
}

/* SUPPORT EVENT TILES (cheer/sub/gift/quest) */
.support-card{
  --art-w: 120px;
  background:#262a33;
  border:1px solid #151820;
  border-radius:12px;
  margin:10px 4px;
  color:#e6e6e6;
  position:relative;
  overflow:hidden;
  box-shadow:0 2px 6px rgba(0,0,0,.25);
}
.se-top{
  display:flex; align-items:center; gap:8px;
  background: linear-gradient(90deg, var(--accent,#ffd36e), color-mix(in srgb, var(--accent,#ffd36e) 60%, #ffffff 0%));
  color:#1a1a1a;
  font-weight:900; font-size:13px;
  padding:6px 10px;
  padding-right: calc(var(--art-w) + 12px);
}
.se-amount{ display:inline-grid; grid-auto-flow:column; gap:6px; align-items:center; }
.se-amount img{ width:16px; height:16px; }
.se-label{ opacity:.9; }

.se-art{
  position:absolute; top:0; right:0; z-index:2;
  width: var(--art-w); height: 100%;
  display:block;
}
.se-art img{ width:100%; height:100%; object-fit:cover; display:block; }

.se-body{
  display:flex; align-items:flex-start; gap:10px;
  padding:10px;
  padding-right: calc(var(--art-w) + 12px);
}
.se-text{ flex:1 1 auto; font-size:14px; line-height:1.4; color:#f2f2f2; }
.se-user{ font-weight:800; text-decoration:none; color: var(--name-color, var(--accent, #ffd36e)); }
.se-user:hover{ text-decoration:underline; }

.support-card[data-type="cheer"]{ --accent:#ffd36e; }
.support-card[data-type="sub"]  { --accent:#b59fff; }
.support-card[data-type="gift"] { --accent:#8ab4ff; }
.support-card[data-type="quest"]{ --accent:#5ee0c8; }

/* Input bar (v2) */
.chat-input.chat-input--v2{
  flex:0 0 auto;
  display:flex; align-items:center; gap:10px;
  padding:10px;
  border-top:1px solid #121317;
  background:#1b1d23;
}
.ci-group{
  position:relative; display:flex; align-items:center; gap:8px;
  flex:1 1 auto; height:42px;
  background:#0f1116; border:1px solid #101217;
  border-radius:22px; padding:0 48px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.03);
}
.ci-group input{ flex:1 1 auto; background:transparent; border:0; outline:none; color:#e6e6e6; font-size:14px; }
.ci-group input::placeholder{ color:#6e7683; }
.ci-circle{
  position:absolute; width:30px; height:30px; border-radius:50%;
  display:grid; place-items:center; font-size:16px; line-height:1;
  background:#171a21; border:1px solid #0f1217; color:#c9ced6;
  cursor:pointer; transition: background .15s ease, color .15s ease, border-color .15s ease, transform .05s ease;
}
.ci-circle:hover{ background:#20242b; color:#fff; border-color:#181b20; }
.ci-prefix{ left:6px; } .ci-suffix{ right:6px; }
.ci-sticker{
  width:42px; height:42px; border-radius:12px;
  display:grid; place-items:center;
  border:1px solid transparent;
  background: var(--accent, #5865f2);
  color:#fff; font-size:18px; line-height:1;
  cursor:pointer; transition: filter .15s ease, transform .05s ease;
}
.ci-sticker:hover{ filter: brightness(1.05); }


/* ===============================================
==================== Main Chat =====================
==================================================*/

:root{
  --mainchat-radius: 12px;
  --mainchat-border: var(--c-border, hsl(0 0% 100% / 0.06));
  --mainchat-panel: var(--c-panel, hsl(228 14% 14%));
}

/* the wrapper becomes a flex child that grows to fill main */
.main-chat-wrap{
  flex: 1 1 auto;              /* take the remaining height in <main> */
  min-height: 0;               /* IMPORTANT: allow inner scroll */
  display: flex;
  padding: 0;                  /* no gutters — full bleed inside main */
}

/* the chat card fills the wrapper */
.main-chat{
  flex: 1 1 auto;
  min-width: 0;
  min-height: 0;               /* allow body to scroll */
  width: 100%;
  max-width: none;             /* no stage-width cap — use full main */
  margin: 0;

  background: var(--mainchat-panel);
  border: 1px solid var(--mainchat-border);
  box-shadow: 0 10px 24px rgba(0,0,0,.35);

  display: flex;
  flex-direction: column;      /* body grows, input sticks to bottom */
  overflow: hidden;            /* keep rounded corners on scroll */
}

/* scale up tokens a touch vs sidebar */
.main-chat .mc-body{
  flex: 1 1 auto;              /* take all free space above input */
  min-height: 0;               /* enable internal scrolling */
  overflow-y: auto;
  overflow-x: hidden;
  padding: 14px;
}
.main-chat .msg-row{
  grid-template-columns: 36px 1fr;
  gap: 10px;
}
.main-chat .msg-avatar{ width:36px; height:36px; }
.main-chat .msg-name{ font-size: 15px; }
.main-chat .msg-text{ font-size: 14px; }

/* input bar identical style, anchored at bottom */
.main-chat .mc-input{
  flex: 0 0 auto;
  padding: 12px;
  border-top: 1px solid #121317;
  background: #1b1d23;
}
.main-chat .ci-group{
  height: 46px;
  border-radius: 24px;
  padding: 0 52px;
}
.main-chat .ci-circle{ width:32px; height:32px; }
.main-chat .ci-sticker{ width:44px; height:44px; border-radius:12px; }

/* responsive tightening */
@media (max-width: 900px){
  .main-chat .mc-body{ padding: 10px; }
  .main-chat .msg-row{ grid-template-columns: 32px 1fr; }
  .main-chat .msg-avatar{ width:32px; height:32px; }
}


/* ===============================================
================ GAMES (FULL MAIN) ================
==================================================*/
:root{
  --games-pad-x: clamp(12px, 2.6vw, 24px);
  --games-gap: 16px;
  --g-radius: 12px;
  --g-border: var(--c-border, hsl(0 0% 100% / 0.06));
  --g-panel: var(--c-panel, hsl(228 14% 14%));

  /* emote-style tooltip vars */
  --tip-bg: rgba(17,19,25,.96);
  --tip-bd: #0f1116;
  --tip-text: #e8eaf0;
  --tip-radius: 10px;
  --tip-pad-y: 6px;
  --tip-pad-x: 10px;
  --tip-shadow: 0 10px 26px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.04) inset;
}

/* Section fills main */
.games-full-wrap{
  width: 100%;
  margin: 0;
  padding: 14px max(var(--games-pad-x), env(safe-area-inset-left))
           24px max(var(--games-pad-x), env(safe-area-inset-right));
}

/* Header */
.games-full-header{
  display:grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items:center;
  margin-bottom: 10px;
}
.games-full-title{
  margin:0;
  font-size:18px;
  font-weight:900;
  color:#fff;
  text-transform:uppercase;
  letter-spacing:.06em;
}
.games-full-controls{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; justify-content:flex-end; }
.gfc-filters{ display:flex; gap:8px; flex-wrap:wrap; }
.gfc-chip{
  background:#262a33; border:1px solid #151820; color:#e6e6e6;
  font-size:12px; font-weight:800; padding:6px 10px; border-radius:999px;
  cursor:pointer; transition:background .15s ease, border-color .15s ease;
}
.gfc-chip:hover{ background:#2b303a; border-color:#1c2029; }
.gfc-chip.active{ background:#1c2028; border-color:#0f1217; }
.gfc-sort{ display:flex; align-items:center; gap:6px; color:#bdbdbd; font-size:12px; }
.gfc-sort select{
  background:#0f1116; color:#e6e6e6; border:1px solid #101217;
  border-radius:8px; padding:6px 8px; font-size:12px; outline:none;
}

/* Grid */
.games-box-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: var(--games-gap);
  align-items:start;
}

/* Card */
.gcard{
  position:relative;
  display:flex; flex-direction:column;
  background: var(--g-panel);
  border:1px solid var(--g-border);
  border-radius: var(--g-radius);
  text-decoration:none; color:#e6e6e6;
  overflow: visible; /* allow tooltips to render outside */
  box-shadow: 0 6px 18px rgba(0,0,0,.28);
  transition: transform .14s ease, box-shadow .14s ease, border-color .14s ease;
  isolation:isolate;
}
.gcard:hover{
  transform: translateY(-2px);
  box-shadow: 0 10px 26px rgba(0,0,0,.35);
  border-color: color-mix(in srgb, var(--g-border) 70%, var(--accent, #7c3aed));
}

/* Media wrapper to anchor pills safely */
.gcard-media{
  position: relative;
  border-top-left-radius: var(--g-radius);
  border-top-right-radius: var(--g-radius);
  overflow: visible; /* do not clip tooltips */
}

/* Portrait art (3:4) */
.gcard-art{
  position:relative;
  aspect-ratio: 3 / 4;
  background:#0b0b0b;
  border-top-left-radius: inherit;
  border-top-right-radius: inherit;
  overflow:hidden; /* clip the image nicely */
}
.gcard-art img{
  width:100%; height:100%; object-fit:cover; display:block;
  transform: scale(1.02);
  transition: transform .35s ease;
}
.gcard:hover .gcard-art img{ transform: scale(1.06); }

/* soft top shine */
.gcard-art::after{
  content:""; position:absolute; inset:0;
  background: linear-gradient(to bottom, rgba(255,255,255,.04), rgba(0,0,0,0) 28%);
  pointer-events:none;
}

/* Corner pills */
.gpill{
  position:absolute;
  width:24px; height:24px;
  border-radius:999px;
  display:grid; place-items:center;
  color:#e6e6e6;
  background: rgba(15,17,22,.82);
  border:1px solid #101217;
  box-shadow: 0 2px 8px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
  z-index:5;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  cursor: default;
  pointer-events: auto; /* enable hover */
}
.gpill svg{ width:14px; height:14px; opacity:.92; }
.gpill.tl{ top:8px; left:8px; }
.gpill.tr{ top:8px; right:8px; }
.gpill.bl{ bottom:8px; left:8px; }
.gpill.br{ bottom:8px; right:8px; }
.gcard:hover .gpill{ border-color: color-mix(in srgb, #101217 70%, var(--accent, #7c3aed)); }

/* ========= Emote-picker style tooltips ========= */
/* base hidden state */
.gpill[data-tip]::after,
.gpill[data-tip]::before{
  content:"";
  position:absolute;
  opacity:0;
  pointer-events:none;
  transition: opacity .14s ease, transform .14s ease;
}

/* bubble */
.gpill[data-tip]::after{
  content: attr(data-tip);
  background: var(--tip-bg);
  color: var(--tip-text);
  border: 1px solid var(--tip-bd);
  border-radius: var(--tip-radius);
  padding: var(--tip-pad-y) var(--tip-pad-x);
  font-size: 12px;
  font-weight: 700;
  box-shadow: var(--tip-shadow);
  z-index: 10;
  white-space: nowrap;
}

/* arrow */
.gpill[data-tip]::before{
  width: 10px; height: 10px;
  background: var(--tip-bg);
  border-left: 1px solid var(--tip-bd);
  border-top: 1px solid var(--tip-bd);
  transform: rotate(45deg);
  z-index: 9;
}

/* Show */
.gpill[data-tip]:hover::after,
.gpill[data-tip]:hover::before,
.gpill[data-tip]:focus-visible::after,
.gpill[data-tip]:focus-visible::before{
  opacity:1;
}

/* ===== Side-specific positioning ===== */
/* Left-side pills (TL & BL) -> tooltip to the RIGHT */
.gpill.tl[data-tip]::after,
.gpill.bl[data-tip]::after{
  left: calc(100% + 8px);
  top: 50%;
  transform: translateY(-50%);
}
.gpill.tl[data-tip]::before,
.gpill.bl[data-tip]::before{
  left: calc(100% + 3px);
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
}

/* Right-side pills (TR & BR) -> tooltip to the LEFT */
.gpill.tr[data-tip]::after,
.gpill.br[data-tip]::after{
  right: calc(100% + 8px);
  top: 50%;
  transform: translateY(-50%);
}
.gpill.tr[data-tip]::before,
.gpill.br[data-tip]::before{
  right: calc(100% + 3px);
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
}

/* Info bar */
.gcard-bar{
  display:flex; align-items:center; justify-content:space-between;
  gap:8px;
  padding:10px;
  background:#1b1d23;
  border-top:1px solid #121317;
  border-bottom-left-radius: var(--g-radius);
  border-bottom-right-radius: var(--g-radius);
}
.gcard-bar::before{
  content:""; position:absolute; left:0; right:0; height:2px; bottom:36px;
  background: linear-gradient(90deg, var(--accent, #7c3aed), transparent 60%);
  opacity:.35; pointer-events:none;
}
.gcard-name{
  font-weight:800; font-size:14px; color:#fff;
  overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
}
.gcard-views{
  display:inline-flex; align-items:center; gap:6px;
  font-size:12px; color:#bdbdbd; font-weight:700; flex:0 0 auto;
}
.gcard-views svg{ width:14px; height:14px; }

/* Focus ring */
.gcard:focus-visible{
  outline:2px solid color-mix(in srgb, var(--accent, #7c3aed), white 20%);
  outline-offset:2px;
  border-radius: calc(var(--g-radius) - 1px);
}

/* Responsive */
@media (max-width: 900px){
  .games-full-header{ grid-template-columns: 1fr; }
  .games-full-controls{ justify-content:flex-start; }
  .games-box-grid{ grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .gpill[data-tip]::after, .gpill[data-tip]::before{
    transition: opacity .001s linear;
  }
}



/* ===================================================
============== GAME CATEGORY (HERO + STREAMS) =========
=================================================== */
:root{
  --gc-pad-x: clamp(12px, 2.6vw, 24px);
  --gc-gap: 16px;
  --gc-radius: 12px;
  --gc-border: var(--c-border, hsl(0 0% 100% / 0.06));
  --gc-panel: var(--c-panel, hsl(228 14% 14%));
  --gc-bar: #1b1d23;

  /* tooltips */
  --tip-bg: rgba(17,19,25,.96);
  --tip-bd: #0f1116;
  --tip-text: #e8eaf0;
  --tip-radius: 10px;
  --tip-pad-y: 6px;
  --tip-pad-x: 10px;
  --tip-shadow: 0 10px 26px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.04) inset;
}

/* HERO */
.gamecat-hero{
  position:relative;
  min-height: 220px;
  background: #0b0c10 center/cover no-repeat;
  background-image: var(--hero);
  border-bottom: 1px solid var(--gc-border); /* base line */
}
.gamecat-hero::before{
  content:"";
  position:absolute; inset:-20px -20px 0 -20px;
  background-image: var(--hero); background-size: cover; background-position: center;
  filter: blur(18px) saturate(1.05);
  opacity:.45; z-index:0;
}
.gamecat-hero-inner{
  position:relative; z-index:1;
  max-width: 1400px;
  margin-inline:auto;
  padding: 22px max(var(--gc-pad-x), env(safe-area-inset-left)) 40px max(var(--gc-pad-x), env(safe-area-inset-right));
  display:flex; align-items:flex-end; gap:16px;
}
.gamecat-cover{
  width:82px; height:82px; border-radius:10px; border:1px solid var(--gc-border);
  box-shadow: 0 10px 26px rgba(0,0,0,.35);
  object-fit: cover; background:#0e0f14;
}
.gamecat-info{ display:flex; flex-direction:column; gap:6px; }
.gamecat-title{
  margin:0; color:#fff; font-size:28px; font-weight:900; letter-spacing:.01em;
  text-shadow: 0 2px 12px rgba(0,0,0,.5);
}
.gamecat-stats{ display:flex; align-items:center; gap:10px; color:#cfd3da; font-weight:700; }
.gamecat-stats svg{ width:16px; height:16px; margin-right:6px; }
.gc-dot{ opacity:.6; }

/* fade and accent divider between hero & grid */
.gamecat-hero-fade{
  position:absolute; left:0; right:0; bottom:-1px; height:60px; z-index:1;
  background: linear-gradient(to bottom, rgba(12,14,18,0), rgba(12,14,18,.9) 60%, rgba(12,14,18,1));
}
.gamecat-hero::after{
  content:"";
  position:absolute; left:0; right:0; bottom:-1px; height:2px; z-index:2;
  /* uses --accent provided on the hero */
  background: linear-gradient(90deg, var(--accent, #7c3aed), transparent 60%);
  pointer-events:none;
}

/* GRID — fixed card width 350px */
.stream-grid{
  max-width: 1400px;
  margin-inline:auto;
  padding: 14px max(var(--gc-pad-x), env(safe-area-inset-left))
           0     max(var(--gc-pad-x), env(safe-area-inset-right));
  display:grid;
  grid-template-columns: repeat(auto-fit, 350px);
  gap: var(--gc-gap);
  justify-content: center;
}

/* CARD */
.scard{
  display:flex; flex-direction:column;
  width: 350px;
  background: var(--gc-panel);
  border:1px solid var(--gc-border);
  border-radius: var(--gc-radius);
  color:#e6e6e6; text-decoration:none;
  overflow: visible;
  box-shadow: 0 6px 18px rgba(0,0,0,.28);
  transition: transform .14s ease, box-shadow .14s ease, border-color .14s ease;
}
.scard:hover{
  transform: translateY(-2px);
  box-shadow: 0 10px 26px rgba(0,0,0,.35);
  border-color: color-mix(in srgb, var(--gc-border) 70%, var(--accent, #7c3aed));
}

/* MEDIA AREA */
.scard-media{
  position:relative;
  border-top-left-radius: var(--gc-radius);
  border-top-right-radius: var(--gc-radius);
  overflow:hidden;
}
.scard-thumb{
  display:block; width:100%; aspect-ratio:16/9; object-fit:cover;
  border-top-left-radius:inherit; border-top-right-radius:inherit;
}

/* Accent color line BETWEEN media and body (per-card --accent) */
.scard-media::after{
  content:"";
  position:absolute; left:0; right:0; bottom:0;
  height:2px;
  background: linear-gradient(90deg, var(--accent, #7c3aed), transparent 60%);
  z-index:5;
}

/* CORNER PILLS */
.spill{
  position:absolute; z-index:6;
  width:26px; height:26px; border-radius:999px;
  display:grid; place-items:center;
  background: rgba(15,17,22,.82);
  border:1px solid #101217;
  color:#e6e6e6;
  box-shadow: 0 2px 8px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
  backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
}
.spill svg{ width:14px; height:14px; opacity:.92; }
.spill.tl{ top:8px; left:8px; }
.spill.tr{ top:8px; right:8px; }
.spill.bl{ bottom:8px; left:8px; }
.spill.br{ bottom:8px; right:8px; }
.scard:hover .spill{ border-color: color-mix(in srgb, #101217 70%, var(--accent, #7c3aed)); }

/* Pills tooltips */
.spill[data-tip]::after,
.spill[data-tip]::before{
  content:""; position:absolute; opacity:0; pointer-events:none;
  transition: opacity .14s ease, transform .14s ease;
}
.spill[data-tip]::after{
  content: attr(data-tip);
  background: var(--tip-bg); color: var(--tip-text);
  border:1px solid var(--tip-bd); border-radius: var(--tip-radius);
  padding: var(--tip-pad-y) var(--tip-pad-x); box-shadow: var(--tip-shadow);
  font-size:12px; font-weight:700; white-space:nowrap; z-index:10;
}
.spill[data-tip]::before{
  width:10px; height:10px; background: var(--tip-bg);
  border-left:1px solid var(--tip-bd); border-top:1px solid var(--tip-bd);
  transform: rotate(45deg); z-index:9;
}
.spill:hover::after, .spill:hover::before,
.spill:focus-visible::after, .spill:focus-visible::before{ opacity:1; }
.spill.tl[data-tip]::after, .spill.bl[data-tip]::after{ left: calc(100% + 8px); top:50%; transform: translateY(-50%); }
.spill.tl[data-tip]::before, .spill.bl[data-tip]::before{ left: calc(100% + 3px); top:50%; transform: translateY(-50%) rotate(45deg); }
.spill.tr[data-tip]::after, .spill.br[data-tip]::after{ right: calc(100% + 8px); top:50%; transform: translateY(-50%); }
.spill.tr[data-tip]::before, .spill.br[data-tip]::before{ right: calc(100% + 3px); top:50%; transform: translateY(-50%) rotate(45deg); }

/* HOVER OVERLAY — image only, SAME SIZE as media, top-rounded */
.scard-creator.image-only{
  position:absolute; inset:0;
  border-top-left-radius: var(--gc-radius);
  border-top-right-radius: var(--gc-radius);
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  overflow:hidden;
  z-index:4;
  opacity:0; transform: translateY(4px);
  transition: opacity .18s ease, transform .18s ease;
  pointer-events:none;
}
.scard:hover .scard-creator.image-only{ opacity:1; transform: translateY(0); }
.creator-banner{
  width:100%; height:100%; object-fit:cover; display:block;
  border-top-left-radius: inherit;
  border-top-right-radius: inherit;
}

/* BODY */
.scard-bar{
  position:relative;
  display:flex; flex-direction:column; gap:10px;
  padding:10px; background: var(--gc-bar);
  border-top:1px solid #121317;
  border-bottom-left-radius: var(--gc-radius);
  border-bottom-right-radius: var(--gc-radius);
  overflow:hidden;
}

/* Title */
.scard-title{
  font-weight:800; color:#fff; font-size:14px; line-height:1.25;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}

/* User row with hover banner chip behind it */
.scard-row{
  position:relative;
  display:flex; align-items:center; justify-content:flex-start; gap:10px;
  isolation:isolate;
}
.scard-row::before{
  content:"";
  position:absolute;
  inset:-6px -6px -6px -6px;
  border-radius:12px;
  background: var(--user-banner, var(--banner, none)) center/cover no-repeat;
  box-shadow: 0 10px 22px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.04);
  opacity:0; transform: translateY(4px) scale(.995);
  transition: opacity .18s ease, transform .18s ease, filter .18s ease;
  pointer-events:none;
  z-index:0;
}
.scard:hover .scard-row::before{
  opacity:1; transform: translateY(0) scale(1);
  filter: saturate(1.05);
}

/* Avatar + name only; frame on hover (card or avatar) */
.scard-user{
  display:flex; align-items:center; gap:10px; min-width:0; color:inherit; text-decoration:none;
  position:relative; z-index:1;
}
.scard-user-ava{
  position:relative; width:40px; height:40px; flex:0 0 40px;
  border-radius:999px; overflow:visible; isolation:isolate;
}
.scard-user-ava img{
  width:100%; height:100%; border-radius:999px; object-fit:cover; display:block; position:relative; z-index:1;
}
.scard-user-ava::after{
  content:""; position:absolute; inset:-12%;
  border-radius:0; background: var(--frame, none) center/contain no-repeat;
  opacity:0; pointer-events:none; z-index:2; transition:opacity .16s ease;
}
.scard:hover .scard-user-ava::after,
.scard-user:hover .scard-user-ava::after{ opacity:1; }
.scard-user-meta{ display:flex; flex-direction:column; min-width:0; }
.scard-user-name{
  color:#fff; font-weight:900; font-size:14px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* Responsive */
@media (max-width: 400px){
  .stream-grid{ grid-template-columns: 1fr; }
  .scard{ width: 100%; }
}
@media (prefers-reduced-motion: reduce){
  .scard, .scard-creator.image-only, .scard-user-ava::after, .scard-row::before{ transition-duration:.01ms; }
}



/* ===============================================
===== Video Stage + Stage Head + Actions Ribbon =====
================================================== */
:root{
  --vs-radius: 12px;
  --vs-border: hsl(0 0% 100% / 0.06);
  --vs-panel: hsl(228 14% 14%);
  --vs-bar: #1b1d23;

  /* layout */
  --left-col: 255px; /* width of chips column (matches HTML inline var) */

  /* tooltip (badges) */
  --tip-bg: rgba(17,19,25,.96);
  --tip-bd: #0f1116;
  --tip-text: #e8eaf0;
  --tip-radius: 10px;
  --tip-pad-y: 6px;
  --tip-pad-x: 10px;
  --tip-shadow: 0 10px 26px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.04) inset;
}

/* Wrap */
.video-stage-wrap{ padding:12px clamp(12px,2.6vw,24px) 0 clamp(12px,2.6vw,24px); }

/* Stage container */
.video-stage{
  max-width:1400px; margin-inline:auto;
  background:var(--vs-panel);
  border:1px solid var(--vs-border);
  border-radius:var(--vs-radius);
  overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.28);
}

/* Player */
.video-stage__player{ position:relative; overflow:hidden; }
.video-stage__player::after{
  content:""; position:absolute; left:0; right:0; bottom:0; height:2px; z-index:5;
  background:linear-gradient(90deg, var(--accent,#7c3aed), transparent 60%);
  pointer-events:none;
}
.stage-media{ position:relative; width:100%; aspect-ratio:16/9; background:#000; }
.stage-media > iframe, .stage-media > video{ position:absolute; inset:0; width:100%; height:100%; border:0; display:block; }
/* corner pills */
.video-stage__player .spill.tl{ top:8px; left:8px; }
.video-stage__player .spill.tr{ top:8px; right:8px; }
.video-stage__player .spill.bl{ bottom:8px; left:8px; }
.video-stage__player .spill.br{ bottom:8px; right:8px; }

/* ===== Stage Head (chips LEFT, title+tags RIGHT) ===== */
.stage-head{
  display:grid;
  grid-template-columns: var(--left-col) 1fr;
  gap:12px;
  padding:8px 12px;
  background:var(--vs-bar);
  border-top:1px solid #121317;
}
.cr-stack{ display:grid; gap:8px; align-self:start; }

/* Mini member chip */
.mini-member{
  position:relative;
  display:grid; grid-template-columns:auto 1fr; align-items:center;
  gap:8px; padding:8px 10px;
  color:inherit; text-decoration:none;
  border:1px solid var(--vs-border); background:#0e1117;
  border-radius:12px; overflow:hidden; isolation:isolate;
}
/* Banner — full cover, bottom-right focal */
.mini-member .mm-banner{
  position:absolute; inset:0; z-index:0;
  background-image:var(--banner, none);
  background-repeat:no-repeat; background-size:cover; background-position:bottom right;
  opacity:1; filter:saturate(1.05);
}
.mini-member .mm-banner::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(to bottom, rgba(0,0,0,.08), rgba(0,0,0,.45));
}
/* Avatars / Art */
.mm-ava{ position:relative; width:40px; height:40px; border-radius:999px; z-index:1; }
.mm-ava img{ width:100%; height:100%; border-radius:inherit; object-fit:cover; display:block; }
/* avatar frame */
.user .mm-ava::after{
  content:""; position:absolute; inset:-12%;
  background:var(--frame, none) center/contain no-repeat;
  opacity:0; z-index:2; transition:opacity .16s ease;
}
.video-stage:hover .user .mm-ava::after, .user:hover .mm-ava::after{ opacity:1; }
/* Game portrait box art */
.boxart{ width:48px; height:64px; border-radius:10px; }
.boxart img{ border-radius:10px; }
/* Meta */
.mm-meta{ position:relative; z-index:1; min-width:0; }
.mm-name{ color:#fff; font-weight:900; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.mm-sub{ color:#cfd3da; font-weight:800; font-size:11px; opacity:.92; margin-top:1px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
/* Accent under game name */
.mini-member.game .mm-name::after{
  content:""; display:block; height:2px; margin-top:4px;
  background:linear-gradient(90deg, var(--accent,#7c3aed), transparent 60%);
  border-radius:2px;
}
/* Badges */
.mm-badges{ margin-top:6px; display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.mm-badge{
  width:20px; height:20px; display:grid; place-items:center;
  border-radius:999px; border:1px solid #101217;
  background:rgba(15,17,22,.82); box-shadow:0 2px 8px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
  backdrop-filter:blur(6px); color:#e6e6e6;
}
.mm-badge svg{ width:12px; height:12px; }
.mm-badge.badge-verified{ color:#22d3ee; background:linear-gradient(180deg, rgba(34,211,238,.24), rgba(34,211,238,.08)); box-shadow:0 0 0 1px rgba(34,211,238,.25), 0 4px 14px rgba(34,211,238,.25); }
.mm-badge.badge-partner{ color:#a855f7; background:linear-gradient(180deg, rgba(168,85,247,.24), rgba(168,85,247,.08)); box-shadow:0 0 0 1px rgba(168,85,247,.25), 0 4px 14px rgba(168,85,247,.25); }
.mm-badge.badge-controller{ color:#3b82f6; background:linear-gradient(180deg, rgba(59,130,246,.24), rgba(59,130,246,.08)); box-shadow:0 0 0 1px rgba(59,130,246,.25), 0 4px 14px rgba(59,130,246,.25); }
.mm-badge.badge-mic{ color:#f43f5e; background:linear-gradient(180deg, rgba(244,63,94,.24), rgba(244,63,94,.08)); box-shadow:0 0 0 1px rgba(244,63,94,.25), 0 4px 14px rgba(244,63,94,.25); }
/* badge tooltips */
.mm-badge[data-tip]::after, .mm-badge[data-tip]::before{ content:""; position:absolute; opacity:0; pointer-events:none; transition:opacity .14s ease, transform .14s ease; }
.mm-badge[data-tip]::after{ content:attr(data-tip); background:var(--tip-bg); color:var(--tip-text); border:1px solid var(--tip-bd); border-radius:var(--tip-radius); padding:var(--tip-pad-y) var(--tip-pad-x); box-shadow:var(--tip-shadow); font-size:11px; font-weight:800; white-space:nowrap; z-index:10; bottom:calc(100% + 8px); left:50%; transform:translate(-50%,6px); }
.mm-badge[data-tip]::before{ width:10px; height:10px; background:var(--tip-bg); border-left:1px solid var(--tip-bd); border-top:1px solid var(--tip-bd); bottom:calc(100% + 3px); left:50%; z-index:9; }
.mm-badge:hover::after, .mm-badge:hover::before, .mm-badge:focus-visible::after, .mm-badge:focus-visible::before{ opacity:1;  }

/* RIGHT side of stage-head */
.sh-main{ display:flex; flex-direction:column; gap:6px; align-self:start; }
.cr-title{
  margin:0; color:#fff; font-weight:800; font-size:14px; line-height:1.25;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.cr-tags{ display:flex; flex-wrap:wrap; gap:6px; }
.tag-pill{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; font-size:11px; font-weight:800; letter-spacing:.01em;
  color:#e6e6e6; text-decoration:none;
  background:rgba(15,17,22,.82); border:1px solid #101217; border-radius:999px;
  box-shadow:0 2px 8px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04); backdrop-filter:blur(6px);
}
.tag-pill.is-accent{ border-color:color-mix(in srgb, #101217 60%, var(--accent,#7c3aed)); box-shadow:0 2px 8px rgba(0,0,0,.35), 0 0 0 1px color-mix(in srgb, transparent 70%, var(--accent,#7c3aed)); }

/* ===== Thin Actions Ribbon ===== */
.creator-ribbon{
  display:grid;
  grid-template-columns: var(--left-col) 1fr auto; /* keep left space reserved */
  align-items:center; gap:12px;
  padding:10px 12px;
  background:var(--vs-bar);
  border-top:1px solid #121317;
}
.cr-empty{ height:1px; } /* just reserves column */
.cr-actions{ display:flex; align-items:center; gap:8px; justify-self:end; }
.cr-btn{
  appearance:none; border:1px solid var(--vs-border); background:#0e1117;
  color:#e6e6e6; font-weight:800; font-size:12px; padding:8px 12px;
  border-radius:10px; cursor:pointer;
}
.cr-btn.primary{
  background: color-mix(in srgb, #0e1117 60%, var(--accent,#7c3aed));
  border-color: color-mix(in srgb, var(--vs-border) 60%, var(--accent,#7c3aed));
}
.cr-icon{
  appearance:none; border:1px solid var(--vs-border); background:#0e1117;
  padding:8px; border-radius:10px; display:grid; place-items:center; cursor:pointer;
}
.cr-icon svg{ width:16px; height:16px; }

/* Responsive */
@media (max-width: 900px){
  .cr-title{ display:none; }
}
@media (max-width: 520px){
  .cr-actions .cr-btn{ display:none; }
}
@media (prefers-reduced-motion: reduce){
  .user .mm-ava::after{ transition-duration:.01ms; }
}





  </style>
</head>
<body class="bg-dark text-light">

  <!-- App layout -->
  <div class="noiz-app d-flex">

<!-- ==============================================
================ channel RAIL ======================
================================================== -->
<aside class="channel-rail">
  <!-- Pinned top (Home + separator) -->
  <div class="channel-rail-top">
    <a class="rail-item home" href="#" aria-label="Home" style=" --accent:linear-gradient(#05D6D9, #F907FC);">
      <img src="home-icon.svg" alt="Home">
    </a>
    <div class="channel-separator"></div>
  </div>

  <!-- Scrollable channel list -->
  <div class="channel-rail-list">
    <!-- Normal channel -->
    <a class="rail-item"
       href="#"
       aria-label="channel A"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#ff72b6;">
      <img src="https://picsum.photos/seed/s1/100" alt="">
    </a>

    <!-- Active channel -->
    <a class="rail-item is-active"
       href="#"
       aria-label="channel B"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8ab4ff;">
      <img src="https://picsum.photos/seed/s2/100" alt="">
    </a>

    <!-- Notification channel (dot idle → bar on hover/active) -->
    <a class="rail-item notification"
       href="#"
       aria-label="channel C (notification)"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#ffd059;">
      <img src="https://picsum.photos/seed/s3/100" alt="">
    </a>

    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
    <!-- More samples -->
    <a class="rail-item"
       href="#"
       aria-label="channel D"
       style="--frame:url('images/frames/astronaut_helmet.png'); --accent:#8cffc7;">
      <img src="https://picsum.photos/seed/s4/100" alt="">
    </a>
  </div>
</aside>


<!-- ==============================================
================ CHANNEL SIDEBAR ==================
================================================== -->
<aside class="channel-sidebar">


  <!-- ==============================================
================ Owner card ==================
================================================== -->
<div class="sidebar-header owner-card"
     style="--accent:#ff72b6; --banner:url('images/banners/cityscape.png');">
  <div class="owner-banner"></div>

  <div class="owner-card__wrap" user="u_2" role="button" tabindex="0" aria-label="Open creator profile">

    <span class="owner-avatar" style="--frame:url('images/frames/astronaut_helmet.png');">
      <img src="https://picsum.photos/seed/creator/100" alt="Creator">
    </span>

    <span class="owner-meta">
      <span class="owner-name">Creator Name</span>
      <span class="owner-status">
        <span class="status-dot" data-status="live"></span>
        <span class="status-text">Live now</span>
      </span>
    </span>

    <span class="owner-actions" aria-label="Creator quick actions">
      <button class="owner-icon" title="Follow">⭐</button>
      <button class="owner-icon" title="Gift">🎁</button>
    </span>
  </div>
</div>




  <nav class="sidebar-channels">
    <div class="channel-category">General</div>

    <a class="channel-link active" href="#" style="--accent:#ff72b6;">
      <span class="channel-hash">#</span> welcome
    </a>

    <a class="channel-link" href="#" style="--accent:#8ab4ff;">
      <span class="channel-hash">#</span> announcements
    </a>

    <div class="channel-category">Voice</div>
    <a class="channel-link" href="#" style="--accent:#ffd059;">
      <span class="channel-hash">🔊</span> General
    </a>
  </nav>




<!-- ==============================================
================ USER BAR =========================
================================================== -->
<footer class="user-bar" style="--accent:#ff72b6; --banner:url('images/banners/cityscape.png');">
  <div class="userbar-banner"></div>

  <!-- full‑row clickable area; div with button semantics -->
  <div class="user-bar__wrap" user="u_1" role="button" tabindex="0" aria-label="Open your profile">
    
    <span class="user-avatar" style="--frame:url('images/frames/astronaut_helmet.png');">
      <img src="https://picsum.photos/seed/user/100" alt="You">
    </span>

    <span class="user-meta">
      <span class="user-name">Username</span>
      <span class="user-status">
        <span class="status-dot" data-status="online"></span>
        <span class="status-text">Online</span>
      </span>
    </span>

    <!-- real buttons live outside the row “button” -->
    <span class="user-actions" aria-label="Quick actions">
      <button class="userbar-icon" title="Mute" aria-label="Mute">🔇</button>
      <button class="userbar-icon" title="Deafen" aria-label="Deafen">🎧</button>
      <button class="userbar-icon" title="Settings" aria-label="Settings">⚙️</button>
    </span>
  </div>
</footer>



</aside>




    <!-- MAIN CONTENT placeholder -->
    <main class="flex-grow-1">
<!-- ==============================================
================ CHAT TOP BAR =====================
================================================== -->
<header class="chat-topbar">
  <div class="chat-topbar-left">
    <span class="channel-hash">#</span>
    <span class="channel-title">general-chat</span>
    <span class="channel-topic">💬</span>
  </div>

  <div class="chat-topbar-right">
    <button class="tb-icon" title="Threads">#</button>


    <button class="tb-icon" data-toggle="sidebar" data-target="#chatSidebar" data-key="chat" aria-pressed="false" title="Chat">💬</button>
    <button class="tb-icon" data-toggle="sidebar" data-target="#memberSidebar" data-key="member" aria-pressed="false" title="Members">👤</button>

    <div class="tb-search-group">
      <input type="text" class="tb-search" placeholder="Search">
      <!-- right circular button inside the pill -->
      <button class="tb-search-btn" title="Search" aria-label="Search">
        <!-- swap this with your search SVG -->
        🔍
      </button>
    </div>

    <button class="tb-icon" title="Settings">⚙️</button>
  </div>
</header>






<!-- ===================================================
============== GAME CATEGORY (HERO + STREAMS) =========
=================================================== -->
<section class="gamecat-wrap" aria-label="Game category: Fortnite" style="display: none;">
  <!-- HERO -->
  <header class="gamecat-hero"
          style="--hero:url('https://images.igdb.com/igdb/image/upload/t_1080p/ar8eh.webp'); --accent:#05D6D9;">
    <div class="gamecat-hero-inner">
      <img class="gamecat-cover"
           src="https://images.igdb.com/igdb/image/upload/t_cover_big/co5zky.webp"
           alt="Fortnite cover">
      <div class="gamecat-info">
        <h1 class="gamecat-title">Fortnite</h1>
        <div class="gamecat-stats">
          <span class="gc-stat">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg>
            3,817 watching
          </span>
          <span class="gc-dot">•</span>
          <span class="gc-stat">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 6h18v12H3zM7 10h10v2H7z"/></svg>
            1,102 live channels
          </span>
        </div>
      </div>
    </div>
    <div class="gamecat-hero-fade"></div>
  </header>

  <!-- STREAM GRID (cards fixed at 350px wide) -->
  <div class="stream-grid">

    <!-- Streamer Card -->
    <a class="scard" href="#"
       style="--accent:#05D6D9; --banner:url('https://picsum.photos/seed/banner1/1600/600'); --user-banner:url('images/banners/cat_beans.png');">
      <div class="scard-media">
        <img class="scard-thumb" src="https://picsum.photos/seed/fort1/1200/675" alt="Live stream thumbnail">

        <!-- corner pills -->
        <span class="spill tl" data-tip="Featured">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="m12 2 3.09 6.26 6.85.99-4.97 4.85 1.17 6.9L12 18.56 5.86 21l1.17-6.9L2.06 9.25l6.85-.99L12 2z"/></svg>
        </span>
        <span class="spill tr" data-tip="English stream">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M2 12a10 10 0 1 0 20 0A10 10 0 0 0 2 12z"/></svg>
        </span>
        <span class="spill bl" data-tip="Quest-enabled">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13 2 3 14h6l-2 8 10-12h-6z"/></svg>
        </span>
        <span class="spill br" data-tip="391 viewers">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg>
        </span>

        <!-- HOVER OVERLAY (image only, same size as media, rounded top) -->
        <div class="scard-creator image-only">
          <img class="creator-banner" src="https://picsum.photos/seed/banner1/1600/600" alt="">
        </div>
      </div>

      <div class="scard-bar">
        <div class="scard-title">24/7 Fortnite Victory Royale!</div>

        <div class="scard-row">
          <span class="scard-user" style="--frame:url('images/frames/astronaut_helmet.png');">
            <span class="scard-user-ava">
              <img src="https://i.pravatar.cc/120?img=12" alt="HypeZoneFortnite">
            </span>
            <span class="scard-user-meta">
              <span class="scard-user-name">HypeZoneFortnite</span>
            </span>
          </span>
        </div>
      </div>
    </a>

    <!-- Streamer Card -->
    <a class="scard" href="#"
       style="--accent:#ff72b6; --banner:url('https://picsum.photos/seed/banner2/1600/600'); --user-banner:url('https://picsum.photos/seed/userbanner2/800/240');">
      <div class="scard-media">
        <img class="scard-thumb" src="https://picsum.photos/seed/fort2/1200/675" alt="Live stream thumbnail">

        <span class="spill tl" data-tip="Featured"><svg viewBox="0 0 24 24"><path d="m12 2 3.09 6.26 6.85.99-4.97 4.85 1.17 6.9L12 18.56 5.86 21l1.17-6.9L2.06 9.25l6.85-.99L12 2z"/></svg></span>
        <span class="spill tr" data-tip="Spanish stream"><svg viewBox="0 0 24 24"><path d="M2 12a10 10 0 1 0 20 0A10 10 0 0 0 2 12z"/></svg></span>
        <span class="spill bl" data-tip="Drops enabled"><svg viewBox="0 0 24 24"><path d="M13 2 3 14h6l-2 8 10-12h-6z"/></svg></span>
        <span class="spill br" data-tip="7,106 viewers"><svg viewBox="0 0 24 24"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg></span>

        <div class="scard-creator image-only">
          <img class="creator-banner" src="https://picsum.photos/seed/banner2/1600/600" alt="">
        </div>
      </div>

      <div class="scard-bar">
        <div class="scard-title">SI PIERDO TE DOY PAVOS</div>

        <div class="scard-row">
          <span class="scard-user" style="--frame:url('images/frames/astronaut_helmet.png');">
            <span class="scard-user-ava">
              <img src="https://i.pravatar.cc/120?img=5" alt="Agustin51">
            </span>
            <span class="scard-user-meta">
              <span class="scard-user-name">Agustin51</span>
            </span>
          </span>
        </div>
      </div>
    </a>

    <!-- Streamer Card -->
    <a class="scard" href="#"
       style="--accent:#8ab4ff; --banner:url('https://picsum.photos/seed/banner3/1600/600'); --user-banner:url('https://picsum.photos/seed/userbanner3/800/240');">
      <div class="scard-media">
        <img class="scard-thumb" src="https://picsum.photos/seed/fort3/1200/675" alt="Live stream thumbnail">

        <span class="spill tl" data-tip="Featured"><svg viewBox="0 0 24 24"><path d="m12 2 3.09 6.26 6.85.99-4.97 4.85 1.17 6.9L12 18.56 5.86 21l1.17-6.9L2.06 9.25l6.85-.99L12 2z"/></svg></span>
        <span class="spill tr" data-tip="English stream"><svg viewBox="0 0 24 24"><path d="M2 12a10 10 0 1 0 20 0A10 10 0 0 0 2 12z"/></svg></span>
        <span class="spill bl" data-tip="Quest-enabled"><svg viewBox="0 0 24 24"><path d="M13 2 3 14h6l-2 8 10-12h-6z"/></svg></span>
        <span class="spill br" data-tip="418 viewers"><svg viewBox="0 0 24 24"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg></span>

        <div class="scard-creator image-only">
          <img class="creator-banner" src="https://picsum.photos/seed/banner3/1600/600" alt="">
        </div>
      </div>

      <div class="scard-bar">
        <div class="scard-title">Channel trying to get wins</div>

        <div class="scard-row">
          <span class="scard-user" style="--frame:url('images/frames/astronaut_helmet.png');">
            <span class="scard-user-ava">
              <img src="https://i.pravatar.cc/120?img=27" alt="Zombie_reaper66">
            </span>
            <span class="scard-user-meta">
              <span class="scard-user-name">Zombie_reaper66</span>
            </span>
          </span>
        </div>
      </div>
    </a>

  </div>
</section>


<!-- ==============================================
================ GAMES (FULL MAIN) ================
================================================== -->
<section class="games-full-wrap" aria-label="Browse games" style="display: none;">
  <header class="games-full-header">
    <h2 class="games-full-title">Games</h2>

    <div class="games-full-controls">
      <div class="gfc-filters">
        <button class="gfc-chip active">Trending</button>
        <button class="gfc-chip">Top</button>
        <button class="gfc-chip">New</button>
        <button class="gfc-chip">Music</button>
        <button class="gfc-chip">IRL</button>
      </div>

      <div class="gfc-sort">
        <label for="gSort">Sort</label>
        <select id="gSort">
          <option selected>Viewers (High → Low)</option>
          <option>Alphabetical</option>
          <option>Recently Active</option>
        </select>
      </div>
    </div>
  </header>

  <div class="games-box-grid">
    <!-- Card 1 -->
    <a class="gcard" href="#" style="--accent:#05D6D9;">
      <div class="gcard-media">
        <div class="gcard-art">
          <img src="https://picsum.photos/seed/fort/600/800" alt="Fortnite box art">
        </div>

        <!-- corner pills (now siblings of art to avoid clipping) -->
        <span class="gpill tl" data-tip="Featured">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="m12 2 3.09 6.26 6.85.99-4.97 4.85 1.17 6.9L12 18.56 5.86 21l1.17-6.9L2.06 9.25l6.85-.99L12 2z"/></svg>
        </span>
        <span class="gpill tr" data-tip="Resonance Boost">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13 2 3 14h6l-2 8 10-12h-6z"/></svg>
        </span>
        <span class="gpill bl" data-tip="Battle Royale">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="m20 10-8-8H4v8l8 8 8-8zM7 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>
        </span>
        <span class="gpill br" data-tip="8,711 viewers">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg>
        </span>
      </div>

      <div class="gcard-bar">
        <span class="gcard-name">Fortnite</span>
        <span class="gcard-views">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg>
          8,711
        </span>
      </div>
    </a>

    <!-- Card 2 -->
    <a class="gcard" href="#" style="--accent:#8ab4ff;">
      <div class="gcard-media">
        <div class="gcard-art">
          <img src="https://picsum.photos/seed/mc/600/800" alt="Minecraft">
        </div>
        <span class="gpill tl" data-tip="Featured"><svg viewBox="0 0 24 24"><path d="m12 2 3.09 6.26 6.85.99-4.97 4.85 1.17 6.9L12 18.56 5.86 21l1.17-6.9L2.06 9.25l6.85-.99L12 2z"/></svg></span>
        <span class="gpill tr" data-tip="Resonance Boost"><svg viewBox="0 0 24 24"><path d="M13 2 3 14h6l-2 8 10-12h-6z"/></svg></span>
        <span class="gpill bl" data-tip="Sandbox"><svg viewBox="0 0 24 24"><path d="m20 10-8-8H4v8l8 8 8-8zM7 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg></span>
        <span class="gpill br" data-tip="2,332 viewers"><svg viewBox="0 0 24 24"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg></span>
      </div>
      <div class="gcard-bar"><span class="gcard-name">Minecraft</span><span class="gcard-views"><svg viewBox="0 0 24 24"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg> 2,332</span></div>
    </a>

    <!-- Card 3 -->
    <a class="gcard" href="#" style="--accent:#ff72b6;">
      <div class="gcard-media">
        <div class="gcard-art">
          <img src="https://picsum.photos/seed/apex/600/800" alt="Apex Legends">
        </div>
        <span class="gpill tl" data-tip="Featured"><svg viewBox="0 0 24 24"><path d="m12 2 3.09 6.26 6.85.99-4.97 4.85 1.17 6.9L12 18.56 5.86 21l1.17-6.9L2.06 9.25l6.85-.99L12 2z"/></svg></span>
        <span class="gpill tr" data-tip="Resonance Boost"><svg viewBox="0 0 24 24"><path d="M13 2 3 14h6l-2 8 10-12h-6z"/></svg></span>
        <span class="gpill bl" data-tip="Hero Shooter"><svg viewBox="0 0 24 24"><path d="m20 10-8-8H4v8l8 8 8-8zM7 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg></span>
        <span class="gpill br" data-tip="2,790 viewers"><svg viewBox="0 0 24 24"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg></span>
      </div>
      <div class="gcard-bar"><span class="gcard-name">Apex Legends</span><span class="gcard-views"><svg viewBox="0 0 24 24"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg> 2,790</span></div>
    </a>

    <!-- Duplicate more .gcard as needed -->
  </div>
</section>







    <!-- ===============================================
==================== Main Chat =====================
== fits inside <main>, centers to stage width =====
==================================================-->
<div class="main-chat-wrap" style="display: none;">
  <section class="main-chat" aria-label="Stream chat">
 <!-- <div class="chat-promo" style="border-radius: 10px;">
    <div class="promo-title">Prediction Card Game</div>
    <div class="promo-sub">Available</div>
    <button class="promo-play">Play</button>
  </div>-->
    <!-- Messages -->
    <div class="mc-body chat-body">
      <!-- example message -->
      <div class="msg-row">
        <a class="msg-avatar Mprofile" user="u_3">
          <img src="https://picsum.photos/seed/m1/200" alt="">
        </a>
        <div class="msg-content">
          <div class="msg-head">
            <a class="msg-name Mprofile" user="u_3" style="--name-color:#8ab4ff">Member User</a>
            <div class="msg-badges">
              <span class="mbadge" title="Verified">✔️</span>
              <span class="mbadge" title="Partner">🟣</span>
            </div>
            <time class="msg-time">2:42 PM</time>
          </div>
          <div class="msg-text">Main chat uses the same message components — just larger tokens.</div>
        </div>
      </div>

      <div class="msg-row">
        <a class="msg-avatar Mprofile" user="u_2">
          <img src="https://picsum.photos/seed/creator/200" alt="">
        </a>
        <div class="msg-content">
          <div class="msg-head">
            <a class="msg-name Mprofile" user="u_2" style="--name-color:#b59fff">Creator User</a>
            <time class="msg-time">2:43 PM</time>
          </div>
          <div class="msg-text">Everything here is scoped so the sidebar chat stays unchanged.</div>
        </div>
      </div>

      <!-- ======= MAIN CHAT SUPPORT EVENTS (user attr added) ======= -->

      <!-- Cheer -->
      <div class="support-card" data-type="cheer" style="--accent:#ffd36e; --art-w:132px;">
        <div class="se-top">
          <span class="se-amount"><img src="images/coins.svg" alt=""> 300</span>
          <span class="se-label">Cheer</span>
        </div>
        <a href="#" class="se-art" user="u_3" title="Open profile">
          <img src="sticker.png" alt="Cheerer Art">
        </a>
        <div class="se-body">
          <div class="se-text">
            <a href="#" class="se-user" user="u_3" style="--name-color:#ffd36e;">iRoniqq</a>
            : let’s gooo! 🔥
          </div>
        </div>
      </div>

      <!-- Subscription -->
      <div class="support-card" data-type="sub" style="--accent:#b59fff; --art-w:132px;">
        <div class="se-top">
          <span class="se-amount"><img src="images/sub.svg" alt=""> Tier 1</span>
          <span class="se-label">Subscription</span>
        </div>
        <a href="#" class="se-art" user="u_3" title="Open profile">
          <img src="sticker.png" alt="Subscriber Art">
        </a>
        <div class="se-body">
          <div class="se-text">
            <a href="#" class="se-user" user="u_3" style="--name-color:#b59fff;">Kami‑Kitsune</a>
            subbed for 6 months!
          </div>
        </div>
      </div>
      <!-- ========================================================== -->
    </div>

    <!-- Input -->
    <div class="mc-input chat-input chat-input--v2">
      <div class="ci-group">
        <button class="ci-circle ci-prefix open-picker" data-picker-tab="emotes" title="Emotes">🙂</button>
        <input type="text" placeholder="Send a message">
        <button class="ci-circle ci-suffix open-picker" data-picker-tab="resonance" title="Resonance">⬡</button>
      </div>
      <button class="ci-sticker" title="Send">➤</button>
    </div>

  </section>
</div>

<!-- ===============================================
===== Video Stage + Stage Head + Actions Ribbon =====
=================================================== -->
<section class="video-stage-wrap" aria-label="Video Stage"
         style="--accent:#05D6D9; --left-col:255px;">
  <div class="video-stage">

    <!-- PLAYER -->
    <div class="video-stage__player">
      <!-- corner pills -->
      <span class="spill tl" data-tip="LIVE">
        <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="6"/></svg>
      </span>
      <span class="spill tr" data-tip="1080p">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6h16v12H4zM7 10h4v4H7zm6 0h4v4h-4z"/></svg>
      </span>
      <span class="spill bl" data-tip="CC Subtitles">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6h16v12H4zM7 13h4v2H7v-2zm6 0h4v2h-4v-2z"/></svg>
      </span>
      <span class="spill br" data-tip="12,340 viewers">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="2.5"/></svg>
      </span>

      <!-- responsive 16:9 container (swap to your player) -->
      <div class="stage-media">
        <iframe
          src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0&modestbranding=1"
          title="Live stream player"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen></iframe>
      </div>
    </div>

    <!-- STAGE HEAD (chips on the LEFT, title + tags on the RIGHT) -->
    <div class="stage-head">
      <!-- LEFT: Streamer + Game chips directly under player -->
      <div class="cr-stack">

        <!-- Streamer chip (name + colorful badges, no subtitle) -->
        <a class="mini-member user"
           href="#"
           style="--frame:url('images/frames/astronaut_helmet.png'); --banner:url('images/banners/cat_beans.png');">
          <span class="mm-ava">
            <img src="https://i.pravatar.cc/160?img=12" alt="HypeZoneFortnite">
          </span>
          <span class="mm-meta">
            <span class="mm-name">HypeZoneFortnite</span>
            <span class="mm-badges">
              <span class="mm-badge badge-verified" data-tip="Verified">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2 9.7 6.6 4.6 7.4 8.3 11l-.9 5.1L12 13.9l4.6 2.2-.9-5.1 3.7-3.6-5.1-.8z"/></svg>
              </span>
              <span class="mm-badge badge-partner" data-tip="Partner">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 3c3.8 0 7 3.1 7 7 0 5.3-6.3 10.6-7 11.1-.7-.5-7-5.8-7-11.1 0-3.9 3.2-7 7-7zm0 9.5 3.5-3.5-1.4-1.4L12 9.7 9.9 7.6 8.5 9l3.5 3.5z"/></svg>
              </span>
              <span class="mm-badge badge-controller" data-tip="Controller">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10h10l2 4a3 3 0 1 1-5 2H10a3 3 0 1 1-5-2l2-4zm2-3h6v2H9V7zm-1 6H6v-2h2v2zm9 0h-2v-2h2v2z"/></svg>
              </span>
              <span class="mm-badge badge-mic" data-tip="Mic On">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 3a3 3 0 0 1 3 3v5a3 3 0 1 1-6 0V6a3 3 0 0 1 3-3zm-6 7h2a4 4 0 0 0 8 0h2a6 6 0 0 1-5 5.9V18h3v2H10v-2h3v-2.1A6 6 0 0 1 6 10z"/></svg>
              </span>
            </span>
          </span>
          <span class="mm-banner" aria-hidden="true"></span>
        </a>

        <!-- Game chip (portrait box art + “Game” label) -->
        <a class="mini-member game"
           href="#"
           style="--banner:url('https://images.igdb.com/igdb/image/upload/t_1080p/ar8eh.webp'); --accent:#05D6D9;">
          <span class="mm-ava boxart">
            <img src="https://images.igdb.com/igdb/image/upload/t_cover_big/co5zky.webp" alt="Fortnite box art">
          </span>
          <span class="mm-meta">
            <span class="mm-name">Fortnite</span>
            <span class="mm-sub">Game</span>
          </span>
          <span class="mm-banner" aria-hidden="true"></span>
        </a>

      </div>

      <!-- RIGHT: title + tag pills (tight to player) -->
      <div class="sh-main">
        <h2 class="cr-title">24/7 Victory Royale grind — customs &amp; chill</h2>
        <div class="cr-tags">
          <a href="#" class="tag-pill is-accent">No-Build</a>
          <a href="#" class="tag-pill">Customs</a>
          <a href="#" class="tag-pill">Chill</a>
          <a href="#" class="tag-pill">Controller</a>
        </div>
      </div>
    </div>

    <!-- ACTIONS RIBBON (thin bar with buttons) -->
    <div class="creator-ribbon">
      <div class="cr-empty" aria-hidden="true"></div>
      <div class="cr-spacer" aria-hidden="true"></div>
      <div class="cr-actions">
        <button class="cr-btn primary">Follow</button>
        <button class="cr-btn">Subscribe</button>
        <button class="cr-icon" aria-label="Share">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18 8a3 3 0 1 0-2.82-4H15l-6.6 3.8A3 3 0 0 0 6 9a3 3 0 0 0 2.4 2.94l6.6 3.8h.18A3 3 0 1 0 18 14a3 3 0 0 0-1.62.47L9.78 10l6.6-3.53A3 3 0 0 0 18 8z"/></svg>
        </button>
        <button class="cr-icon" aria-label="More">
          <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></svg>
        </button>
      </div>
    </div>

  </div>
</section>





    </main>










<!-- ==============================================
================ CHAT SIDEBAR =====================
================================================== -->
<aside id="chatSidebar" class="chat-sidebar app-sidebar" style="--w:400px;">

  <!-- 1) Header (set --banner to show a header image) -->
  <header class="chat-header" style="--banner:url('images/banners/cityscape.png');">
    <span class="chat-title">Stream Chat</span>
  </header>

  <!-- 2) Top‑3 leaderboard (horizontal scroll) -->
  <div class="chat-top3">
    <div class="top3-scroller">
      <a class="top-chip" href="#" style="--accent:#b59fff;">
        <span class="top-rank">1</span>
        <span class="top-name">Kami‑Kitsune</span>
        <span class="top-score"><img src="images/coins.svg" alt="" class="coin">300</span>
      </a>
      <a class="top-chip" href="#" style="--accent:#8ab4ff;">
        <span class="top-rank">2</span>
        <span class="top-name">discoqueen</span>
        <span class="top-score"><img src="images/coins.svg" alt="" class="coin">300</span>
      </a>
      <a class="top-chip" href="#" style="--accent:#ffd059;">
        <span class="top-rank">3</span>
        <span class="top-name">froggielex</span>
        <span class="top-score"><img src="images/coins.svg" alt="" class="coin">200</span>
      </a>
    </div>
  </div>

  <!-- 3) Promo card AFTER leaderboard -->
  <div class="chat-promo">
    <div class="promo-title">Prediction Card Game</div>
    <div class="promo-sub">Available</div>
    <button class="promo-play">Play</button>
  </div>

<!-- 4) Messages -->
<div class="chat-body">

  <!-- Standard message line -->
  <div class="msg-row" style="--name-color:#b59fff;">
    <a class="msg-avatar" user="u_3" href="#" style="--frame:url('images/frames/astronaut_helmet.png');">
      <img src="https://picsum.photos/seed/m11/64" alt="disc0queen">
    </a>
    <div class="msg-content">
      <div class="msg-head">
        <a class="msg-name " user="u_3" href="#">disc0queen</a>
        <span class="msg-badges">
          <svg class="mbadge" viewBox="0 0 20 20"><rect width="20" height="20" rx="4" fill="#7c3aed"/><path fill="#fff" d="M6 10h8v2H6z"/></svg>
        </span>
        <span class="msg-time">2:24 PM</span>
      </div>
      <div class="msg-text">YAY</div>
    </div>
  </div>

  <!-- Standard message line -->
  <div class="msg-row" style="--name-color:#8ab4ff;">
    <a class="msg-avatar " user="u_ducky83" href="#">
      <img src="https://picsum.photos/seed/m12/64" alt="Ducky83">
    </a>
    <div class="msg-content">
      <div class="msg-head">
        <a class="msg-name " user="u_ducky83" href="#">Ducky83</a>
        <span class="msg-time">2:25 PM</span>
      </div>
      <div class="msg-text"><span class="emoji">🎁</span><span class="emoji">🦆</span> Hey @DanielK</div>
    </div>
  </div>

  <!-- SUPPORT EVENT: CHEER -->
  <div class="support-card" data-type="cheer" style="--accent:#ffd36e; --art-w:132px;">
    <div class="se-top">
      <span class="se-amount"><img src="images/coins.svg" alt=""> 100</span>
      <span class="se-label">Cheer</span>
    </div>
    <a href="#" class="se-art " user="u_iron" title="Open profile">
      <img src="sticker.png" alt="Cheerer Art">
    </a>
    <div class="se-body">
      <div class="se-text">
        <a href="#" class="se-user " user="u_iron" style="--name-color:#ffd36e;">iRoniqq</a>
        : is so sad that this platform will close
      </div>
    </div>
  </div>

  <!-- SUPPORT EVENT: SUB -->
  <div class="support-card" data-type="sub" style="--accent:#b59fff; --art-w:132px;">
    <div class="se-top">
      <span class="se-amount"><img src="images/sub.svg" alt=""> Tier 1</span>
      <span class="se-label">Subscription</span>
    </div>
    <a href="#" class="se-art " user="u_kami" title="Open profile">
      <img src="sticker.png" alt="Subscriber Art">
    </a>
    <div class="se-body">
      <div class="se-text">
        <a href="#" class="se-user " user="u_kami" style="--name-color:#b59fff;">Kami‑Kitsune</a>
        just subscribed for 3 months!
      </div>
    </div>
  </div>

  <!-- SUPPORT EVENT: GIFT -->
  <div class="support-card" data-type="gift" style="--accent:#8ab4ff; --art-w:132px;">
    <div class="se-top">
      <span class="se-amount"><img src="images/gift.svg" alt=""> ×5</span>
      <span class="se-label">Gift</span>
    </div>
    <a href="#" class="se-art " user="u_3" title="Open profile">
      <img src="sticker.png" alt="Gift Art">
    </a>
    <div class="se-body">
      <div class="se-text">
        <a href="#" class="se-user " user="u_3" style="--name-color:#8ab4ff;">discoqueen</a>
        gifted 5 subs to the community!
      </div>
    </div>
  </div>

  <!-- SUPPORT EVENT: QUEST -->
  <div class="support-card" data-type="quest" style="--accent:#5ee0c8; --art-w:132px;">
    <div class="se-top">
      <span class="se-amount"><img src="images/quest.svg" alt=""> 75%</span>
      <span class="se-label">Quest</span>
    </div>
    <a href="#" class="se-art " user="u_frog" title="Open profile">
      <img src="sticker.png" alt="Quest Art">
    </a>
    <div class="se-body">
      <div class="se-text">
        <a href="#" class="se-user " user="u_frog" style="--name-color:#5ee0c8;">froggielex</a>
        pushed the stream quest to 75% — almost there!
      </div>
    </div>
  </div>

</div>


  <!-- 5) Input bar (unchanged v2) -->
  <footer class="chat-input chat-input--v2">
    <div class="ci-group">
      <button class="ci-circle ci-prefix open-picker" data-picker-tab="resonance" title="Resonance">⬡</button>

      <input type="text" placeholder="Say hi">
      <button class="ci-circle ci-suffix open-picker" data-picker-tab="emotes" title="Emotes">

        <!-- Gray Smiley Emote -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
     width="28" height="28" role="img" aria-label=":smile_gray:">
  <defs>
    <linearGradient id="noizGrayFace" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0"  stop-color="#C9CDD3"/>
      <stop offset="1"  stop-color="#949AA3"/>
    </linearGradient>
  </defs>

  <!-- face -->
  <circle cx="12" cy="12" r="9"
          fill="url(#noizGrayFace)"
          stroke="#4D535A" stroke-width="1.2"/>

  <!-- soft top highlight -->
  <path d="M5.2 8.3a7.2 7.2 0 0 1 13.6 0"
        fill="none" stroke="#FFFFFF" stroke-opacity=".18"
        stroke-width="2" stroke-linecap="round"/>

  <!-- eyes -->
  <ellipse cx="9"  cy="10.1" rx="1.05" ry="1.35" fill="#2F343A"/>
  <ellipse cx="15" cy="10.1" rx="1.05" ry="1.35" fill="#2F343A"/>

  <!-- smile -->
  <path d="M7.8 14.2c1.15 1.7 3.05 2.6 4.2 2.6s3.05-.9 4.2-2.6"
        fill="none" stroke="#2F343A" stroke-width="1.4"
        stroke-linecap="round" stroke-linejoin="round"/>
</svg>


      </button>
    </div>
    <button class="ci-sticker" title="Stickers">🩹</button>
  </footer>
</aside>



<!-- ==============================================
================ MEMBER SIDEBAR ===================
================================================== -->
<aside class="member-sidebar app-sidebar" id="memberSidebar" style="--w:260px;">
  <!-- Sticky header with banner -->
  <div class="member-header" style="--accent:#8ab4ff; --banner:url('images/banners/cityscape.png');">
    <div class="member-banner"></div>
    <div class="member-header__wrap">
      <span class="member-header__title">Members</span>
      <span class="member-header__count">12 online</span>
    </div>
  </div>

  <!-- List -->
  <div class="member-list">
    <div class="member-section">
      ONLINE 
      <span class="member-section-count" style="--accent:#3ba55d;">12</span>
    </div>

    <!-- Example member with banner + badges -->
    <a class="member-row" user="u_3" href="#" style="--accent:#8ab4ff; --banner:url('images/banners/cityscape.png');">
      <div class="member-row-banner"></div>
      <span class="member-avatar" style="--frame:url('images/frames/astronaut_helmet.png');">
        <img src="https://picsum.photos/seed/m1/100" alt="Alice">
      </span>
      <span class="member-meta">
        <div class="member-name-badges">
          <span class="member-name">Alice</span>
          <span class="member-badges">
            <svg class="mbadge" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
              <circle cx="10" cy="10" r="9" fill="#5865F2"/>
              <path fill="#fff" d="M5 10h10v2H5z"/>
            </svg>
            <svg class="mbadge" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
              <rect width="20" height="20" rx="4" fill="#00C2A8"/>
              <path fill="#fff" d="M8 10l2 2 4-4 2 2-6 6-4-4z"/>
            </svg>
          </span>
        </div>
        <span class="member-sub">Playing Stardew</span>
      </span>
      <span class="status-dot" data-status="online"></span>
    </a>

    <a class="member-row notification" user="u_3" href="#" style="--accent:#ff72b6; --banner:url('images/banners/cityscape.png');">
      <div class="member-row-banner"></div>
      <span class="member-avatar"><img src="https://picsum.photos/seed/m2/100" alt="Bri"></span>
      <span class="member-meta">
        <div class="member-name-badges"><span class="member-name">Bri</span></div>
        <span class="member-sub">Typing…</span>
      </span>
      <span class="status-dot" data-status="away"></span>
    </a>

    
    
    <div class="member-section">
      OFFLINE 
      <span class="member-section-count" style="--accent:#1f2420;">12</span>
    </div>


    <a class="member-row" user="u_3" href="#" style="--accent:#ffd059; --banner:url('images/banners/cityscape.png');">
      <div class="member-row-banner"></div>
      <span class="member-avatar"><img src="https://picsum.photos/seed/m3/100" alt="Cam"></span>
      <span class="member-meta">
        <div class="member-name-badges"><span class="member-name">Cam</span></div>
        <span class="member-sub">In Voice: General</span>
      </span>
      <span class="status-dot" data-status="dnd"></span>
    </a>
  </div>
</aside>

































  </div>


<!-- ==============================================
================ MINI PROFILE (CARD STYLE) =========
================================================== -->
<div id="mini-profile" class="mini-profile hidden" role="dialog" aria-modal="false" aria-hidden="true" style="--accent:#7c3aed;">
  <!-- Banner -->
  <div class="mp-banner"></div>

  <!-- Accent divider (avatar will overlap this) -->
  <div class="mp-accent"></div>

  <!-- Body -->
  <div class="mp-body">
    <div class="mp-avatar" aria-hidden="true" style="--frame:url('images/frames/astronaut_helmet.png');">
      <img id="mpAvatar" alt="">
    </div>

    <div class="mp-meta">
      <div class="mp-name-line">
        <span id="mpDisplayName" class="mp-display">Creator Name</span>
      </div>

      <div class="mp-status-line">
        <span id="mpStatusDot" class="status-dot" data-status="live"></span>
        <span id="mpStatusText" class="mp-status-text">Live now</span>
      </div>

      <!-- Badges section -->
      <div id="mpBadges" class="mp-badges">
        <!-- Example badges -->
        <span class="mbadge" data-tip="Affiliate">🟣</span>
        <span class="mbadge" data-tip="Partner">🔵</span>
        <span class="mbadge" data-tip="Vibe">💫</span>
      </div>

      <p id="mpAbout" class="mp-about">Owner/creator demo profile.</p>

      <div class="mp-stats">
        <div><strong id="mpStat1">1,200</strong><span>Followers</span></div>
        <div><strong id="mpStat2">50</strong><span>Following</span></div>
        <div><strong id="mpStat3">15</strong><span>Mutuals</span></div>
      </div>
    </div>
  </div>

  <div class="mp-actions">
    <button class="mp-btn primary" id="mpMessageBtn">Message</button>
    <button class="mp-btn" id="mpAddBtn">Add Friend</button>
    <button class="mp-icon" id="mpMoreBtn" title="More">⋯</button>
  </div>
</div>





<script>
(() => {
  // --- Demo data (match your IDs in the HTML). Replace with your live data if you have it.
  const USERS = {
    u_1: {
      display: 'Username',
      avatar: 'https://picsum.photos/seed/user/100',
      banner: 'images/banners/cityscape.png',
      accent: '#ff72b6',
      status: { state: 'online', text: 'Online' },
      badges: [
        { emoji: '✔️', tip: 'Verified' },
        { emoji: '🟣', tip: 'Partner' },
        { emoji: '🎮', tip: 'Controller' },
      ],
      about: 'Just vibing and building NOIZ-UI.',
      stats: [{ n: '12.3k', label: 'Followers' }, { n: '254', label: 'Subs' }, { n: '98', label: 'Clips' }],
    },
    u_2: {
      display: 'Creator Name',
      avatar: 'https://picsum.photos/seed/creator/100',
      banner: 'images/banners/cat_beans.png',
      accent: '#b59fff',
      status: { state: 'live', text: 'Live now' },
      badges: [
        { emoji: '✔️', tip: 'Verified' },
        { emoji: '🟣', tip: 'Partner' },
        { emoji: '🎙️', tip: 'Mic On' },
      ],
      about: 'Grinding dubs — customs & chill.',
      stats: [{ n: '81k', label: 'Followers' }, { n: '3.2k', label: 'Subs' }, { n: '412', label: 'Clips' }],
    },
    u_3: {
      display: 'Member User',
      avatar: 'https://picsum.photos/seed/m1/200',
      banner: 'images/banners/cityscape.png',
      accent: '#8ab4ff',
      status: { state: 'away', text: 'Be right back' },
      badges: [
        { emoji: '💎', tip: 'Top Supporter' },
        { emoji: '🎉', tip: 'Event Winner' },
      ],
      about: 'I click things so tooltips appear.',
      stats: [{ n: '1.2k', label: 'Messages' }, { n: '36', label: 'Gifts' }, { n: '7', label: 'Clips' }],
    }
  };

  // --- Ensure one mini-profile exists (use the HTML in your page if it’s already there)
  function ensureMiniProfile() {
    let mp = document.querySelector('.mini-profile');
    if (mp) return mp;

    // If not present, create a minimal, CSS-compatible structure
    mp = document.createElement('div');
    mp.className = 'mini-profile hidden'; // keep layout for measurements
    mp.innerHTML = `
      <div class="mp-banner"></div>
      <div class="mp-accent"></div>
      <div class="mp-body">
        <div class="mp-avatar"><img alt=""></div>
        <div class="mp-meta">
          <div class="mp-name-line">
            <span class="mp-display"></span>
          </div>
          <div class="mp-status-line">
            <span class="status-dot" data-status="offline"></span>
            <span class="mp-status-text">Offline</span>
          </div>
          <div class="mp-badges"></div>
          <div class="mp-about"></div>
          <div class="mp-stats"></div>
        </div>
      </div>
      <div class="mp-actions">
        <button class="mp-btn primary">Follow</button>
        <button class="mp-btn">Subscribe</button>
        <button class="mp-icon" title="Share">🔗</button>
      </div>
    `;
    document.body.appendChild(mp);
    return mp;
  }

  const mp = ensureMiniProfile();

  // --- Populate card with user data
  function fillMiniProfile(user) {
    const banner = mp.querySelector('.mp-banner');
    const avatar = mp.querySelector('.mp-avatar img');
    const display = mp.querySelector('.mp-display');
    const dot = mp.querySelector('.status-dot');
    const stext = mp.querySelector('.mp-status-text');
    const badges = mp.querySelector('.mp-badges');
    const about = mp.querySelector('.mp-about');
    const stats = mp.querySelector('.mp-stats');

    // Accent + media
    mp.style.setProperty('--accent', user.accent || '#7c3aed');
    banner.style.backgroundImage = user.banner ? `url("${user.banner}")` : 'none';
    avatar.src = user.avatar || '';
    display.textContent = user.display || 'Unknown';

    // Status
    const state = user.status?.state || 'offline';
    dot.setAttribute('data-status', state);
    stext.textContent = user.status?.text || 'Offline';

    // Badges (strip background is already on .mp-badges)
    badges.innerHTML = '';
    (user.badges || []).forEach(b => {
      const el = document.createElement('span');
      el.className = 'mbadge';
      el.textContent = b.emoji || '🏷️';
      if (b.tip) el.setAttribute('data-tip', b.tip); // CSS tooltips read data-tip
      badges.appendChild(el);
    });

    // About
    about.textContent = user.about || '';

    // Stats
    stats.innerHTML = '';
    (user.stats || []).forEach(s => {
      const tile = document.createElement('div');
      tile.innerHTML = `<strong>${s.n}</strong><span>${s.label}</span>`;
      stats.appendChild(tile);
    });
  }

  // --- Position the card near the anchor element (kept in viewport)
  function positionMiniProfile(anchor) {
    const rect = anchor.getBoundingClientRect();
    const { innerWidth: vw, innerHeight: vh } = window;

    const mpW = mp.offsetWidth || 320;
    const mpH = mp.offsetHeight || 220;

    // Prefer to the right of the anchor; fall back to left if cramped
    let left = rect.right + 8;
    if (left + mpW > vw - 8) left = rect.left - mpW - 8;
    if (left < 8) left = 8;

    // Align top to anchor’s top (but keep on screen)
    let top = rect.top;
    if (top + mpH > vh - 8) top = vh - mpH - 8;
    if (top < 8) top = 8;

    mp.style.left = `${left + window.scrollX}px`;
    mp.style.top  = `${top  + window.scrollY}px`;
  }

  // --- Show/Hide
  let hideTimer = null;
  function showMiniProfile(userId, anchor) {
    const data = USERS[userId];
    if (!data) return;

    fillMiniProfile(data);
    positionMiniProfile(anchor);

    mp.classList.add('visible');
    mp.classList.remove('hidden');

    // small guard to keep it open when moving mouse onto the card
    clearTimeout(hideTimer);
  }

  function hideMiniProfile(immediate = false) {
    const doHide = () => {
      mp.classList.remove('visible');
      mp.classList.add('hidden');
    };
    clearTimeout(hideTimer);
    if (immediate) return doHide();
    hideTimer = setTimeout(doHide, 80);
  }

  // --- Wiring: every element with a [user] attribute is a trigger
  const TRIGGER_SELECTORS = [
    '.msg-avatar[user]',
    '.msg-name[user]',
    '.se-art[user]',
    '.se-user[user]',
    '.user-bar__wrap[user]',
    '.owner-card__wrap[user]',
    '.mini-member[user]',
    // add more if you introduce them elsewhere
  ].join(',');

  function onTriggerClick(e) {
    e.preventDefault();
    e.stopPropagation();
    const anchor = e.currentTarget;
    const userId = anchor.getAttribute('user');
    showMiniProfile(userId, anchor);
  }

  function attachTriggers(root = document) {
    root.querySelectorAll(TRIGGER_SELECTORS).forEach(el => {
      // Avoid double-binding
      if (el.dataset.mpBound) return;
      el.dataset.mpBound = '1';
      el.addEventListener('click', onTriggerClick);
    });
  }

  // Initial bind + observe DOM for new messages/cards added later
  attachTriggers();
  const mo = new MutationObserver(() => attachTriggers());
  mo.observe(document.body, { childList: true, subtree: true });

  // Close when clicking outside
  document.addEventListener('click', (e) => {
    if (!mp.classList.contains('visible')) return;
    if (mp.contains(e.target)) return;
    // If the click was on another trigger, the handler above will re-open with new data
    hideMiniProfile(true);
  });

  // Keep open when moving from trigger to card; allow leaving to close
  mp.addEventListener('mouseenter', () => clearTimeout(hideTimer));
  mp.addEventListener('mouseleave', () => hideMiniProfile());

  // Escape to close
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') hideMiniProfile(true);
  });

  // Reposition on resize/scroll
  window.addEventListener('resize', () => {
    if (!mp.classList.contains('visible')) return;
    // try to keep it roughly where it was; you can store last anchor if you want perfect tracking
    const lastAnchor = document.querySelector(TRIGGER_SELECTORS + '.__last'); // optional enhancement
    if (lastAnchor) positionMiniProfile(lastAnchor);
  });

  // --- Badge tooltips: nothing to do in JS; CSS already shows [data-tip] on :hover.
  // Ensure your badges are inside the .mp-badges container (which has the strip background),
  // not each badge having its own background. This code only inserts plain spans.
})();
</script>





<script>

  /* ===============================================
================ COLLAPSE LOGIC JS =================
==================================================*/

(() => {
  const STORAGE_PREFIX = 'sb:';

  // restore saved states
  document.querySelectorAll('.app-sidebar[id]').forEach(sidebar => {
    const key = STORAGE_PREFIX + sidebar.id;
    if (localStorage.getItem(key) === '1') {
      sidebar.classList.add('is-collapsed');
      document.querySelectorAll(`[data-toggle="sidebar"][data-target="#${sidebar.id}"]`)
        .forEach(btn => btn.setAttribute('aria-pressed','true'));
    }
  });

  // delegated handler
  document.addEventListener('click', e => {
    const btn = e.target.closest('[data-toggle="sidebar"]');
    if (!btn) return;

    const targetSel = btn.getAttribute('data-target');
    const sidebar   = document.querySelector(targetSel);
    if (!sidebar) return;

    const isCollapsed = sidebar.classList.contains('is-collapsed');

    // 👇 close ALL sidebars first
    document.querySelectorAll('.app-sidebar').forEach(sb => {
      sb.classList.add('is-collapsed');
      localStorage.setItem(STORAGE_PREFIX + sb.id, '1');
      document.querySelectorAll(`[data-toggle="sidebar"][data-target="#${sb.id}"]`)
        .forEach(b => b.setAttribute('aria-pressed','true'));
    });

    // then toggle the one you clicked
    if (isCollapsed) {
      sidebar.classList.remove('is-collapsed');
      localStorage.setItem(STORAGE_PREFIX + sidebar.id, '0');
      document.querySelectorAll(`[data-toggle="sidebar"][data-target="${targetSel}"]`)
        .forEach(b => b.setAttribute('aria-pressed','false'));
    } else {
      // if it was already open, we just closed it above, so persist collapse
      localStorage.setItem(STORAGE_PREFIX + sidebar.id, '1');
    }
  });
})();



</script>




<script>
// Pick a random user id from FAKE_USERS (with optional excludes)
function getRandomUserId({ exclude = [] } = {}) {
  const ids = Object.keys(FAKE_USERS).filter(id => !exclude.includes(id));
  if (!ids.length) return null;
  return ids[Math.floor(Math.random() * ids.length)];
}

// Add a message from a specific user (keeps your current behavior)
function addMessage(userId, text, timestamp = new Date()) {
  const u = FAKE_USERS[userId];
  if (!u) { console.warn('Unknown userId:', userId); return; }

  const body = document.querySelector('.chat-body');
  const row = document.createElement('div');
  row.className = 'msg-row';
  row.style.setProperty('--name-color', u.accent || u.nameColor || '#8ab4ff');

  // take first 2 badges for chat line (optional)
  const chatBadges = (u.badges || []).slice(0, 5)
    .map(b => (b.svg || b))
    .join('');

  row.innerHTML = `
    <a class="msg-avatar" user="${u.id}" href="#" ${u.frame ? `style="--frame:url('${u.frame}');"` : ''}>
      <img src="${u.avatar}" alt="${u.displayName || u.username || u.id}">
    </a>
    <div class="msg-content">
      <div class="msg-head">
        <a class="msg-name" user="${u.id}" href="#">${u.displayName || u.username || u.id}</a>
        <span class="msg-badges">${chatBadges}</span>
        <span class="msg-time">${timestamp.toLocaleTimeString([], {hour:'numeric', minute:'2-digit'})}</span>
      </div>
      <div class="msg-text">${text}</div>
    </div>
  `;

  body.appendChild(row);
  body.scrollTop = body.scrollHeight;
}
// Sugar: same message text, random user each call
function addRandomMessage(text, opts = {}) {
  const uid = getRandomUserId(opts);
  if (!uid) return console.warn('No users available for random pick');
  addMessage(uid, text);
  const rand = Math.floor(Math.random() * 50000) + 1000;
  const pill = document.querySelector('.co-viewers');
  if (pill){
    pill.lastChild.nodeValue = ` ${rand.toLocaleString()}`;
  }
}

/* ---- quick demo ----
addRandomMessage('Same message, random user ✨');*/
//setInterval(() => addRandomMessage('Ping from a random user 🗨️'), 8000);

</script>














  <!-- Bootstrap JS (optional; not required for this step) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
